!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("ecsy"),require("three"),require("three/examples/jsm/loaders/GLTFLoader.js"),require("three/examples/jsm/vr/WebVR.js")):"function"==typeof define&&define.amd?define(["exports","ecsy","three","three/examples/jsm/loaders/GLTFLoader.js","three/examples/jsm/vr/WebVR.js"],t):(e=e||self,function(){var s=e.ECSYTHREE,n=e.ECSYTHREE={};t(n,e.ECSY,e.THREE,e.GLTFLoader_js,e.WebVR_js),n.noConflict=function(){return e.ECSYTHREE=s,n}}())}(this,(function(e,t,s,n,i){"use strict";class o{constructor(){this.reset()}reset(){this.value=!1}}class a{constructor(){this.reset()}reset(){this.leftHand=null,this.rightHand=null,this.camera=null}}class r extends t.TagComponent{}class l{constructor(){this.primitive="box"}reset(){this.primitive="box"}}class c{}class d{constructor(){this.value=null}reset(){this.value=null}}class h{constructor(){this.value=null}reset(){this.value=null}}class u{constructor(){this.scene=null,this.camera=null}reset(){this.scene=null,this.camera=null}}class m{constructor(){this.scene=null}reset(){this.scene=null}}class p{constructor(){this.texture="",this.type=""}reset(){this.texture="",this.type=""}}class g{reset(){}}class v{constructor(){this.position=new s.Vector3,this.rotation=new s.Vector3}copy(e){this.position.copy(e.position),this.rotation.copy(e.rotation)}reset(){this.position.set(0,0,0),this.rotation.set(0,0,0)}}class f{constructor(){this.reset()}reset(){this.value=!1}}class y{constructor(){this.fov=45,this.aspect=1,this.near=1,this.far=1e3,this.layers=0,this.handleResize=!0}}class w{constructor(){this.vr=!0,this.antialias=!0,this.handleResize=!0,this.gammaInput=!0,this.gammaOutput=!0,this.shadowMap=!1}}class C extends t.System{execute(){this.queries.entities.removed.forEach(()=>{}),this.queries.entities.added.forEach(e=>{var t,n=e.getComponent(l);switch(n.primitive){case"torus":t=new s.TorusBufferGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments);break;case"sphere":t=new s.IcosahedronBufferGeometry(n.radius,1);break;case"box":t=new s.BoxBufferGeometry(n.width,n.height,n.depth)}var i="torus"===n.primitive?10066176:16777215*Math.random(),o=new s.MeshLambertMaterial({color:i,flatShading:!0}),a=new s.Mesh(t,o);if(a.castShadow=!0,a.receiveShadow=!0,e.hasComponent(v)){var r=e.getComponent(v);a.position.copy(r.position),r.rotation&&a.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}e.addComponent(d,{value:a}),e.hasComponent(h)&&e.getComponent(h).value.getComponent(d).value.add(a)})}}C.queries={entities:{components:[l],listen:{added:!0,removed:!0}}};var x=(new n.GLTFLoader).setPath("/assets/");class b extends t.System{execute(){var e=this.queries.entities.added;for(let n=0;n<e.length;n++){var t=e[n],s=t.getComponent(c);x.load(s.url,e=>{t.hasComponent(h)&&t.getComponent(h).value.add(e.scene),t.addComponent(d,{value:e.scene})})}}}b.queries={entities:{components:[c],listen:{added:!0}}};class S extends t.System{execute(){let e=this.queries.entities.results;for(let t=0;t<e.length;t++){let n=e[t],i=n.getComponent(p),o=new s.Group,a=new s.BoxBufferGeometry(100,100,100);if(a.scale(1,1,-1),"cubemap-stereo"===i.type){let e=E(i.textureUrl,12),t=[];for(let n=0;n<6;n++)t.push(new s.MeshBasicMaterial({map:e[n]}));let r=new s.Mesh(a,t);r.layers.set(1),o.add(r);let l=[];for(let t=6;t<12;t++)l.push(new s.MeshBasicMaterial({map:e[t]}));let c=new s.Mesh(a,l);c.layers.set(2),o.add(c),n.addComponent(d,{value:o})}else console.warn("Unknown skybox type: ",i.type)}}}function E(e,t){let n=[];for(let e=0;e<t;e++)n[e]=new s.Texture;return(new s.ImageLoader).load(e,(function(e){let t,s,i=e.height;for(let o=0;o<n.length;o++)s=(t=document.createElement("canvas")).getContext("2d"),t.height=i,t.width=i,s.drawImage(e,i*o,0,i,i,0,0,i,i),n[o].image=t,n[o].needsUpdate=!0})),n}S.queries={entities:{components:[p,t.Not(d)]}};class q extends t.System{processVisibility(e){e.forEach(e=>{e.getMutableComponent(d).value.visible=e.getComponent(f).value})}execute(){this.processVisibility(this.queries.entities.added),this.processVisibility(this.queries.entities.changed)}}q.queries={entities:{components:[f,d],listen:{added:!0,changed:[f]}}};class M{constructor(){this.value=null}}class R extends t.System{init(){window.addEventListener("resize",()=>{this.queries.renderers.results.forEach(e=>{var t=e.getMutableComponent(w);t.width=window.innerWidth,t.height=window.innerHeight})},!1)}execute(){this.queries.renderers.results.forEach(e=>{var t=e.getComponent(M).value;this.queries.renderPasses.results.forEach(e=>{var s=e.getComponent(u).scene.getComponent(d).value;this.queries.activeCameras.results.forEach(e=>{var n=e.getComponent(d).value;t.render(s,n)})})}),this.queries.uninitializedRenderers.results.forEach(e=>{var t=e.getComponent(w),n=new s.WebGLRenderer({antialias:t.antialias});t.animationLoop&&n.setAnimationLoop(t.animationLoop),n.setPixelRatio(window.devicePixelRatio),t.handleResize&&n.setSize(window.innerWidth,window.innerHeight),n.gammaInput=t.gammaInput,n.gammaOutput=t.gammaOutput,n.shadowMap.enabled=t.shadowMap,document.body.appendChild(n.domElement),t.vr&&(n.vr.enabled=!0,document.body.appendChild(i.WEBVR.createButton(n,{referenceSpaceType:"local"}))),e.addComponent(M,{value:n})}),this.queries.renderers.changed.forEach(e=>{var t=e.getComponent(w),s=e.getComponent(M).value;t.width===s.width&&t.height===s.height||s.setSize(t.width,t.height)})}}R.queries={uninitializedRenderers:{components:[w,t.Not(M)]},renderers:{components:[w,M],listen:{changed:[w]}},renderPasses:{components:[u]},activeCameras:{components:[y,o],listen:{added:!0}}};class L extends t.System{execute(){let e=this.queries.parent.added;for(var t=0;t<e.length;t++){var s=e[t],n=s.getComponent(h).value.getComponent(d).value,i=s.getComponent(d).value;n.add(i)}}}L.queries={parent:{components:[h,d],listen:{added:!0}}};class T extends t.System{init(){window.addEventListener("resize",()=>{this.queries.cameras.results.forEach(e=>{e.getComponent(y).handleResize&&(e.getMutableComponent(y).aspect=window.innerWidth/window.innerHeight,console.log("Aspect updated"))})},!1)}execute(){let e=this.queries.cameras.changed;for(let t=0;t<e.length;t++){let s=e[t],n=s.getComponent(y),i=s.getMutableComponent(d).value;i.aspect!==n.aspect&&(console.log("Camera Updated"),i.aspect=n.aspect,i.updateProjectionMatrix())}this.queries.camerasUninitialized.results.forEach(e=>{console.log(e);let t=e.getComponent(y),n=new s.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);n.layers.enable(t.layers),e.addComponent(d,{value:n})})}}T.queries={camerasUninitialized:{components:[y,t.Not(d)]},cameras:{components:[y,d],listen:{changed:[y]}}};class z extends t.System{init(){this.initialized=!1;var e=new s.FontLoader;this.font=null,e.load("/assets/fonts/helvetiker_regular.typeface.json",e=>{this.font=e,this.initialized=!0})}execute(){this.font&&(this.queries.entities.changed.forEach(e=>{var t=e.getComponent(g),n=new s.TextGeometry(t.text,{font:this.font,size:1,height:.1,curveSegments:3,bevelEnabled:!0,bevelThickness:.03,bevelSize:.03,bevelOffset:0,bevelSegments:3});e.getMutableComponent(d).value.geometry=n}),this.queries.entities.added.forEach(e=>{var t=e.getComponent(g),n=new s.TextGeometry(t.text,{font:this.font,size:1,height:.1,curveSegments:3,bevelEnabled:!0,bevelThickness:.03,bevelSize:.03,bevelOffset:0,bevelSegments:3});Math.random();var i=new s.MeshStandardMaterial({color:16777215,roughness:.7,metalness:0}),o=new s.Mesh(n,i);e.addComponent(d,{value:o})}))}}function G(e){e.registerSystem(L).registerSystem(T).registerSystem(R,{priority:1})}z.queries={entities:{components:[g],listen:{added:!0,changed:!0}}},e.Active=o,e.Camera=y,e.CameraRig=a,e.CameraSystem=T,e.Draggable=class{constructor(){this.reset()}reset(){this.value=!1}},e.Dragging=r,e.GLTFLoaderSystem=b,e.GLTFModel=c,e.Geometry=l,e.GeometrySystem=C,e.Material=class{constructor(){this.color=16711680}},e.Object3D=d,e.Parent=h,e.Position=class{constructor(){this.position=new s.Vector3}reset(){this.position.set(0,0,0)}},e.RenderPass=u,e.Rotation=class{constructor(){this.rotation=new s.Vector3}reset(){this.rotation.set(0,0,0)}},e.Scene=m,e.Sky=class{constructor(){}reset(){}},e.SkyBox=p,e.SkyBoxSystem=S,e.TextGeometry=g,e.TextGeometrySystem=z,e.Transform=v,e.TransformSystem=L,e.VRController=class{constructor(){this.id=0,this.controller=null}reset(){}},e.VisibilitySystem=q,e.Visible=f,e.WebGLRendererContext=M,e.WebGLRendererSystem=R,e.init=G,e.initializeDefault=function(e=new t.World,n){const i=new s.Clock;G(e);let o=e.createEntity().addComponent(m).addComponent(d,{value:new s.Scene}),r=e.createEntity().addComponent(w,{animationLoop:()=>{e.execute(i.getDelta(),i.elapsedTime)}});var l=null,c=null;n.vr?c=e.createEntity().addComponent(a):l=e.createEntity().addComponent(y,{fov:90,aspect:window.innerWidth/window.innerHeight,near:1,far:1e3,layers:1,handleResize:!0});let h=e.createEntity().addComponent(u,{scene:o,camera:l});return{world:e,entities:{scene:o,camera:l,cameraRig:c,renderer:r,renderPass:h}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNzeS10aHJlZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wb25lbnRzL0FjdGl2ZS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL0NhbWVyYVJpZy5qcyIsIi4uL3NyYy9jb21wb25lbnRzL0RyYWdnaW5nLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvR2VvbWV0cnkuanMiLCIuLi9zcmMvY29tcG9uZW50cy9HTFRGTW9kZWwuanMiLCIuLi9zcmMvY29tcG9uZW50cy9PYmplY3QzRC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1BhcmVudC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1JlbmRlclBhc3MuanMiLCIuLi9zcmMvY29tcG9uZW50cy9TY2VuZS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1NreWJveC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1RleHRHZW9tZXRyeS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1RyYW5zZm9ybS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1Zpc2libGUuanMiLCIuLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcyIsIi4uL3NyYy9zeXN0ZW1zL0dlb21ldHJ5U3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvR0xURkxvYWRlclN5c3RlbS5qcyIsIi4uL3NyYy9zeXN0ZW1zL1NreUJveFN5c3RlbS5qcyIsIi4uL3NyYy9zeXN0ZW1zL1Zpc2liaWxpdHlTeXN0ZW0uanMiLCIuLi9zcmMvc3lzdGVtcy9XZWJHTFJlbmRlcmVyU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvVHJhbnNmb3JtU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvVGV4dEdlb21ldHJ5U3lzdGVtLmpzIiwiLi4vc3JjL2luZGV4LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvRHJhZ2dhYmxlLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvTWF0ZXJpYWwuanMiLCIuLi9zcmMvY29tcG9uZW50cy9Qb3NpdGlvbi5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1JvdGF0aW9uLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvU2t5LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvVlJDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBY3RpdmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYW1lcmFSaWcge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLmxlZnRIYW5kID0gbnVsbDtcbiAgICB0aGlzLnJpZ2h0SGFuZCA9IG51bGw7XG4gICAgdGhpcy5jYW1lcmEgPSBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBUYWdDb21wb25lbnQgfSBmcm9tIFwiZWNzeVwiO1xuZXhwb3J0IGNsYXNzIERyYWdnaW5nIGV4dGVuZHMgVGFnQ29tcG9uZW50IHt9XG4iLCJleHBvcnQgY2xhc3MgR2VvbWV0cnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IFwiYm94XCI7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IFwiYm94XCI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBHTFRGTW9kZWwge31cbiIsImV4cG9ydCBjbGFzcyBPYmplY3QzRCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQYXJlbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUmVuZGVyUGFzcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2NlbmUgPSBudWxsO1xuICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuc2NlbmUgPSBudWxsO1xuICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNjZW5lIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zY2VuZSA9IG51bGw7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnNjZW5lID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNreUJveCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGV4dHVyZSA9IFwiXCI7XG4gICAgdGhpcy50eXBlID0gXCJcIjtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLnRleHR1cmUgPSBcIlwiO1xuICAgIHRoaXMudHlwZSA9IFwiXCI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBUZXh0R2VvbWV0cnkge1xuICByZXNldCgpIHt9XG59XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIFRyYW5zZm9ybSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMucm90YXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICB9XG5cbiAgY29weShzcmMpIHtcbiAgICB0aGlzLnBvc2l0aW9uLmNvcHkoc3JjLnBvc2l0aW9uKTtcbiAgICB0aGlzLnJvdGF0aW9uLmNvcHkoc3JjLnJvdGF0aW9uKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICAgIHRoaXMucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVmlzaWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50Q2xhc3MgfSBmcm9tIFwiZWNzeVwiO1xuXG5leHBvcnQgeyBBY3RpdmUgfSBmcm9tIFwiLi9BY3RpdmUuanNcIjtcbmV4cG9ydCB7IENhbWVyYVJpZyB9IGZyb20gXCIuL0NhbWVyYVJpZy5qc1wiO1xuZXhwb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSBcIi4vRHJhZ2dhYmxlLmpzXCI7XG5leHBvcnQgeyBEcmFnZ2luZyB9IGZyb20gXCIuL0RyYWdnaW5nLmpzXCI7XG5leHBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL0dlb21ldHJ5LmpzXCI7XG5leHBvcnQgeyBHTFRGTW9kZWwgfSBmcm9tIFwiLi9HTFRGTW9kZWwuanNcIjtcbmV4cG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWwuanNcIjtcbmV4cG9ydCB7IE9iamVjdDNEIH0gZnJvbSBcIi4vT2JqZWN0M0QuanNcIjtcbmV4cG9ydCB7IFBhcmVudCB9IGZyb20gXCIuL1BhcmVudC5qc1wiO1xuZXhwb3J0IHsgUG9zaXRpb24gfSBmcm9tIFwiLi9Qb3NpdGlvbi5qc1wiO1xuZXhwb3J0IHsgUmVuZGVyUGFzcyB9IGZyb20gXCIuL1JlbmRlclBhc3MuanNcIjtcbmV4cG9ydCB7IFJvdGF0aW9uIH0gZnJvbSBcIi4vUm90YXRpb24uanNcIjtcbmV4cG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4vU2NlbmUuanNcIjtcbmV4cG9ydCB7IFNreSB9IGZyb20gXCIuL1NreS5qc1wiO1xuZXhwb3J0IHsgU2t5Qm94IH0gZnJvbSBcIi4vU2t5Ym94LmpzXCI7XG5leHBvcnQgeyBUZXh0R2VvbWV0cnkgfSBmcm9tIFwiLi9UZXh0R2VvbWV0cnkuanNcIjtcbmV4cG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCIuL1RyYW5zZm9ybS5qc1wiO1xuZXhwb3J0IHsgVmlzaWJsZSB9IGZyb20gXCIuL1Zpc2libGUuanNcIjtcbmV4cG9ydCB7IFZSQ29udHJvbGxlciB9IGZyb20gXCIuL1ZSQ29udHJvbGxlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5mb3YgPSA0NTtcbiAgICB0aGlzLmFzcGVjdCA9IDE7XG4gICAgdGhpcy5uZWFyID0gMTtcbiAgICB0aGlzLmZhciA9IDEwMDA7XG4gICAgdGhpcy5sYXllcnMgPSAwO1xuICAgIHRoaXMuaGFuZGxlUmVzaXplID0gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2ViR0xSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudnIgPSB0cnVlO1xuICAgIHRoaXMuYW50aWFsaWFzID0gdHJ1ZTtcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZSA9IHRydWU7XG4gICAgdGhpcy5nYW1tYUlucHV0ID0gdHJ1ZTtcbiAgICB0aGlzLmdhbW1hT3V0cHV0ID0gdHJ1ZTtcbiAgICB0aGlzLnNoYWRvd01hcCA9IGZhbHNlO1xuICB9XG59XG5cblxuLypcbmV4cG9ydCBjb25zdCBXZWJHTFJlbmRlcmVyID0gY3JlYXRlQ29tcG9uZW50Q2xhc3MoXG4gIHtcbiAgICB2cjogeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgYW50aWFsaWFzOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBoYW5kbGVSZXNpemU6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGdhbW1hSW5wdXQ6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGdhbW1hT3V0cHV0OiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBzaGFkb3dNYXA6IHsgZGVmYXVsdDogZmFsc2UgfVxuICB9LFxuICBcIldlYkdMUmVuZGVyZXJcIlxuKTtcbiovIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHtcbiAgR2VvbWV0cnksXG4gIE9iamVjdDNELFxuICBUcmFuc2Zvcm0sXG4gIC8vICBFbGVtZW50LFxuICAvLyAgRHJhZ2dhYmxlLFxuICBQYXJlbnRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvaW5kZXguanNcIjtcblxuLyoqXG4gKiBDcmVhdGUgYSBNZXNoIGJhc2VkIG9uIHRoZSBbR2VvbWV0cnldIGNvbXBvbmVudCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBlbnRpdHkgdXNpbmcgYSBbT2JqZWN0M0RdIGNvbXBvbmVudFxuICovXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKCkge1xuICAgIC8vIFJlbW92ZWRcbiAgICB0aGlzLnF1ZXJpZXMuZW50aXRpZXMucmVtb3ZlZC5mb3JFYWNoKCgvKmVudGl0eSovKSA9PiB7XG4gICAgICAvKlxuICAgICAgdmFyIG9iamVjdCA9IGVudGl0eS5nZXRSZW1vdmVkQ29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcbiAgICAgIHZhciBwYXJlbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFBhcmVudCwgdHJ1ZSkudmFsdWU7XG4gICAgICBwYXJlbnQuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZS5yZW1vdmUob2JqZWN0KTtcbiAgICAgICovXG4gICAgfSk7XG5cbiAgICAvLyBBZGRlZFxuICAgIHRoaXMucXVlcmllcy5lbnRpdGllcy5hZGRlZC5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChHZW9tZXRyeSk7XG5cbiAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgIHN3aXRjaCAoY29tcG9uZW50LnByaW1pdGl2ZSkge1xuICAgICAgICBjYXNlIFwidG9ydXNcIjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Ub3J1c0J1ZmZlckdlb21ldHJ5KFxuICAgICAgICAgICAgICBjb21wb25lbnQucmFkaXVzLFxuICAgICAgICAgICAgICBjb21wb25lbnQudHViZSxcbiAgICAgICAgICAgICAgY29tcG9uZW50LnJhZGlhbFNlZ21lbnRzLFxuICAgICAgICAgICAgICBjb21wb25lbnQudHVidWxhclNlZ21lbnRzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNwaGVyZVwiOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnkoY29tcG9uZW50LnJhZGl1cywgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYm94XCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkoXG4gICAgICAgICAgICAgIGNvbXBvbmVudC53aWR0aCxcbiAgICAgICAgICAgICAgY29tcG9uZW50LmhlaWdodCxcbiAgICAgICAgICAgICAgY29tcG9uZW50LmRlcHRoXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbG9yID1cbiAgICAgICAgY29tcG9uZW50LnByaW1pdGl2ZSA9PT0gXCJ0b3J1c1wiID8gMHg5OTk5MDAgOiBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmY7XG5cbiAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtcbiAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8qXG4gICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgIHJvdWdobmVzczogMC43LFxuICAgICAgICBtZXRhbG5lc3M6IDAuMCxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pO1xuKi9cblxuICAgICAgdmFyIG9iamVjdCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gICAgICBvYmplY3QuY2FzdFNoYWRvdyA9IHRydWU7XG4gICAgICBvYmplY3QucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG5cbiAgICAgIGlmIChlbnRpdHkuaGFzQ29tcG9uZW50KFRyYW5zZm9ybSkpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgb2JqZWN0LnBvc2l0aW9uLmNvcHkodHJhbnNmb3JtLnBvc2l0aW9uKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybS5yb3RhdGlvbikge1xuICAgICAgICAgIG9iamVjdC5yb3RhdGlvbi5zZXQoXG4gICAgICAgICAgICB0cmFuc2Zvcm0ucm90YXRpb24ueCxcbiAgICAgICAgICAgIHRyYW5zZm9ybS5yb3RhdGlvbi55LFxuICAgICAgICAgICAgdHJhbnNmb3JtLnJvdGF0aW9uLnpcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vICAgICAgaWYgKGVudGl0eS5oYXNDb21wb25lbnQoRWxlbWVudCkgJiYgIWVudGl0eS5oYXNDb21wb25lbnQoRHJhZ2dhYmxlKSkge1xuICAgICAgLy8gICAgICAgIG9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXQoMHgzMzMzMzMpO1xuICAgICAgLy8gICAgICB9XG5cbiAgICAgIGVudGl0eS5hZGRDb21wb25lbnQoT2JqZWN0M0QsIHsgdmFsdWU6IG9iamVjdCB9KTtcblxuICAgICAgLy8gQHRvZG8gUmVtb3ZlIGl0ISBoaWVyYXJjaHkgc3lzdGVtIHdpbGwgdGFrZSBjYXJlIG9mIGl0XG4gICAgICBpZiAoZW50aXR5Lmhhc0NvbXBvbmVudChQYXJlbnQpKSB7XG4gICAgICAgIGVudGl0eVxuICAgICAgICAgIC5nZXRDb21wb25lbnQoUGFyZW50KVxuICAgICAgICAgIC52YWx1ZS5nZXRDb21wb25lbnQoT2JqZWN0M0QpXG4gICAgICAgICAgLnZhbHVlLmFkZChvYmplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbkdlb21ldHJ5U3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGVudGl0aWVzOiB7XG4gICAgY29tcG9uZW50czogW0dlb21ldHJ5XSwgLy8gQHRvZG8gVHJhbnNmb3JtOiBBcyBvcHRpb25hbCwgaG93IHRvIGRlZmluZSBpdD9cbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlLFxuICAgICAgcmVtb3ZlZDogdHJ1ZVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlci5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IFBhcmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BhcmVudC5qc1wiO1xuaW1wb3J0IHsgT2JqZWN0M0QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9PYmplY3QzRC5qc1wiO1xuaW1wb3J0IHsgR0xURk1vZGVsIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvR0xURk1vZGVsLmpzXCI7XG5cbi8vIEB0b2RvIFVzZSBwYXJhbWV0ZXIgYW5kIGxvYWRlciBtYW5hZ2VyXG52YXIgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIoKS5zZXRQYXRoKFwiL2Fzc2V0cy9cIik7XG5cbmV4cG9ydCBjbGFzcyBHTFRGTG9hZGVyU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcbiAgZXhlY3V0ZSgpIHtcbiAgICB2YXIgZW50aXRpZXMgPSB0aGlzLnF1ZXJpZXMuZW50aXRpZXMuYWRkZWQ7XG5cbiAgICAvL1F1ZXJpZXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudGl0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZW50aXR5ID0gZW50aXRpZXNbaV07XG4gICAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChHTFRGTW9kZWwpO1xuXG4gICAgICBsb2FkZXIubG9hZChjb21wb25lbnQudXJsLCBnbHRmID0+IHtcbiAgICAgICAgLypcbiAgICAgICAgZ2x0Zi5zY2VuZS50cmF2ZXJzZShmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICAgIGlmIChjaGlsZC5pc01lc2gpIHtcbiAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLmVudk1hcCA9IGVudk1hcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuKi9cbiAgICAgICAgLy8gQHRvZG8gUmVtb3ZlLCBoaWVyYXJjaHkgd2lsbCB0YWtlIGNhcmUgb2YgaXRcbiAgICAgICAgaWYgKGVudGl0eS5oYXNDb21wb25lbnQoUGFyZW50KSkge1xuICAgICAgICAgIGVudGl0eS5nZXRDb21wb25lbnQoUGFyZW50KS52YWx1ZS5hZGQoZ2x0Zi5zY2VuZSk7XG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChPYmplY3QzRCwgeyB2YWx1ZTogZ2x0Zi5zY2VuZSB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5HTFRGTG9hZGVyU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGVudGl0aWVzOiB7XG4gICAgY29tcG9uZW50czogW0dMVEZNb2RlbF0sXG4gICAgbGlzdGVuOiB7XG4gICAgICBhZGRlZDogdHJ1ZVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCB7IFN5c3RlbSwgTm90IH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IFNreUJveCwgT2JqZWN0M0QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5cbmV4cG9ydCBjbGFzcyBTa3lCb3hTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKCkge1xuICAgIGxldCBlbnRpdGllcyA9IHRoaXMucXVlcmllcy5lbnRpdGllcy5yZXN1bHRzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSBlbnRpdGllc1tpXTtcblxuICAgICAgbGV0IHNreWJveCA9IGVudGl0eS5nZXRDb21wb25lbnQoU2t5Qm94KTtcblxuICAgICAgbGV0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgICBsZXQgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkoMTAwLCAxMDAsIDEwMCk7XG4gICAgICBnZW9tZXRyeS5zY2FsZSgxLCAxLCAtMSk7XG5cbiAgICAgIGlmIChza3lib3gudHlwZSA9PT0gXCJjdWJlbWFwLXN0ZXJlb1wiKSB7XG4gICAgICAgIGxldCB0ZXh0dXJlcyA9IGdldFRleHR1cmVzRnJvbUF0bGFzRmlsZShza3lib3gudGV4dHVyZVVybCwgMTIpO1xuXG4gICAgICAgIGxldCBtYXRlcmlhbHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDY7IGorKykge1xuICAgICAgICAgIG1hdGVyaWFscy5wdXNoKG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IG1hcDogdGV4dHVyZXNbal0gfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNreUJveCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbHMpO1xuICAgICAgICBza3lCb3gubGF5ZXJzLnNldCgxKTtcbiAgICAgICAgZ3JvdXAuYWRkKHNreUJveCk7XG5cbiAgICAgICAgbGV0IG1hdGVyaWFsc1IgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBqID0gNjsgaiA8IDEyOyBqKyspIHtcbiAgICAgICAgICBtYXRlcmlhbHNSLnB1c2gobmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgbWFwOiB0ZXh0dXJlc1tqXSB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2t5Qm94UiA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbHNSKTtcbiAgICAgICAgc2t5Qm94Ui5sYXllcnMuc2V0KDIpO1xuICAgICAgICBncm91cC5hZGQoc2t5Qm94Uik7XG5cbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChPYmplY3QzRCwgeyB2YWx1ZTogZ3JvdXAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVbmtub3duIHNreWJveCB0eXBlOiBcIiwgc2t5Ym94LnR5cGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRUZXh0dXJlc0Zyb21BdGxhc0ZpbGUoYXRsYXNJbWdVcmwsIHRpbGVzTnVtKSB7XG4gIGxldCB0ZXh0dXJlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGlsZXNOdW07IGkrKykge1xuICAgIHRleHR1cmVzW2ldID0gbmV3IFRIUkVFLlRleHR1cmUoKTtcbiAgfVxuXG4gIGxldCBsb2FkZXIgPSBuZXcgVEhSRUUuSW1hZ2VMb2FkZXIoKTtcbiAgbG9hZGVyLmxvYWQoYXRsYXNJbWdVcmwsIGZ1bmN0aW9uKGltYWdlT2JqKSB7XG4gICAgbGV0IGNhbnZhcywgY29udGV4dDtcbiAgICBsZXQgdGlsZVdpZHRoID0gaW1hZ2VPYmouaGVpZ2h0O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHRpbGVXaWR0aDtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHRpbGVXaWR0aDtcbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICBpbWFnZU9iaixcbiAgICAgICAgdGlsZVdpZHRoICogaSxcbiAgICAgICAgMCxcbiAgICAgICAgdGlsZVdpZHRoLFxuICAgICAgICB0aWxlV2lkdGgsXG4gICAgICAgIDAsXG4gICAgICAgIDAsXG4gICAgICAgIHRpbGVXaWR0aCxcbiAgICAgICAgdGlsZVdpZHRoXG4gICAgICApO1xuICAgICAgdGV4dHVyZXNbaV0uaW1hZ2UgPSBjYW52YXM7XG4gICAgICB0ZXh0dXJlc1tpXS5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdGV4dHVyZXM7XG59XG5cblNreUJveFN5c3RlbS5xdWVyaWVzID0ge1xuICBlbnRpdGllczoge1xuICAgIGNvbXBvbmVudHM6IFtTa3lCb3gsIE5vdChPYmplY3QzRCldXG4gIH1cbn07XG4iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgVmlzaWJsZSwgT2JqZWN0M0QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVmlzaWJpbGl0eVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIHByb2Nlc3NWaXNpYmlsaXR5KGVudGl0aWVzKSB7XG4gICAgZW50aXRpZXMuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoT2JqZWN0M0QpLnZhbHVlLnZpc2libGUgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFxuICAgICAgICBWaXNpYmxlXG4gICAgICApLnZhbHVlO1xuICAgIH0pO1xuICB9XG5cbiAgZXhlY3V0ZSgpIHtcbiAgICB0aGlzLnByb2Nlc3NWaXNpYmlsaXR5KHRoaXMucXVlcmllcy5lbnRpdGllcy5hZGRlZCk7XG4gICAgdGhpcy5wcm9jZXNzVmlzaWJpbGl0eSh0aGlzLnF1ZXJpZXMuZW50aXRpZXMuY2hhbmdlZCk7XG4gIH1cbn1cblxuVmlzaWJpbGl0eVN5c3RlbS5xdWVyaWVzID0ge1xuICBlbnRpdGllczoge1xuICAgIGNvbXBvbmVudHM6IFtWaXNpYmxlLCBPYmplY3QzRF0sXG4gICAgbGlzdGVuOiB7XG4gICAgICBhZGRlZDogdHJ1ZSxcbiAgICAgIGNoYW5nZWQ6IFtWaXNpYmxlXVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCB7IFN5c3RlbSwgTm90IH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7XG4gIFJlbmRlclBhc3MsXG4gIENhbWVyYSxcbiAgQWN0aXZlLFxuICBXZWJHTFJlbmRlcmVyLFxuICBPYmplY3QzRFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgeyBXRUJWUiB9IGZyb20gXCJ0aHJlZS9leGFtcGxlcy9qc20vdnIvV2ViVlIuanNcIjtcblxuZXhwb3J0IGNsYXNzIFdlYkdMUmVuZGVyZXJDb250ZXh0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdlYkdMUmVuZGVyZXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBpbml0KCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJyZXNpemVcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5xdWVyaWVzLnJlbmRlcmVycy5yZXN1bHRzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgICAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoV2ViR0xSZW5kZXJlcik7XG4gICAgICAgICAgY29tcG9uZW50LndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgY29tcG9uZW50LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICB9XG5cbiAgZXhlY3V0ZSgpIHtcbiAgICBsZXQgcmVuZGVyZXJzID0gdGhpcy5xdWVyaWVzLnJlbmRlcmVycy5yZXN1bHRzO1xuICAgIHJlbmRlcmVycy5mb3JFYWNoKHJlbmRlcmVyRW50aXR5ID0+IHtcbiAgICAgIHZhciByZW5kZXJlciA9IHJlbmRlcmVyRW50aXR5LmdldENvbXBvbmVudChXZWJHTFJlbmRlcmVyQ29udGV4dCkudmFsdWU7XG4gICAgICB0aGlzLnF1ZXJpZXMucmVuZGVyUGFzc2VzLnJlc3VsdHMuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgICB2YXIgcGFzcyA9IGVudGl0eS5nZXRDb21wb25lbnQoUmVuZGVyUGFzcyk7XG4gICAgICAgIHZhciBzY2VuZSA9IHBhc3Muc2NlbmUuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcblxuICAgICAgICB0aGlzLnF1ZXJpZXMuYWN0aXZlQ2FtZXJhcy5yZXN1bHRzLmZvckVhY2goY2FtZXJhRW50aXR5ID0+IHtcbiAgICAgICAgICB2YXIgY2FtZXJhID0gY2FtZXJhRW50aXR5LmdldENvbXBvbmVudChPYmplY3QzRCkudmFsdWU7XG4gICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gVW5pbml0aWFsaXplZCByZW5kZXJlcnNcbiAgICB0aGlzLnF1ZXJpZXMudW5pbml0aWFsaXplZFJlbmRlcmVycy5yZXN1bHRzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFdlYkdMUmVuZGVyZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7XG4gICAgICAgIGFudGlhbGlhczogY29tcG9uZW50LmFudGlhbGlhc1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChjb21wb25lbnQuYW5pbWF0aW9uTG9vcCkge1xuICAgICAgICByZW5kZXJlci5zZXRBbmltYXRpb25Mb29wKGNvbXBvbmVudC5hbmltYXRpb25Mb29wKTtcbiAgICAgIH1cblxuICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICBpZiAoY29tcG9uZW50LmhhbmRsZVJlc2l6ZSkge1xuICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICByZW5kZXJlci5nYW1tYUlucHV0ID0gY29tcG9uZW50LmdhbW1hSW5wdXQ7XG4gICAgICByZW5kZXJlci5nYW1tYU91dHB1dCA9IGNvbXBvbmVudC5nYW1tYU91dHB1dDtcbiAgICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gY29tcG9uZW50LnNoYWRvd01hcDtcblxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICAgICAgaWYgKGNvbXBvbmVudC52cikge1xuICAgICAgICByZW5kZXJlci52ci5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChcbiAgICAgICAgICBXRUJWUi5jcmVhdGVCdXR0b24ocmVuZGVyZXIsIHsgcmVmZXJlbmNlU3BhY2VUeXBlOiBcImxvY2FsXCIgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgZW50aXR5LmFkZENvbXBvbmVudChXZWJHTFJlbmRlcmVyQ29udGV4dCwgeyB2YWx1ZTogcmVuZGVyZXIgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnF1ZXJpZXMucmVuZGVyZXJzLmNoYW5nZWQuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5nZXRDb21wb25lbnQoV2ViR0xSZW5kZXJlcik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFdlYkdMUmVuZGVyZXJDb250ZXh0KS52YWx1ZTtcbiAgICAgIGlmIChcbiAgICAgICAgY29tcG9uZW50LndpZHRoICE9PSByZW5kZXJlci53aWR0aCB8fFxuICAgICAgICBjb21wb25lbnQuaGVpZ2h0ICE9PSByZW5kZXJlci5oZWlnaHRcbiAgICAgICkge1xuICAgICAgICByZW5kZXJlci5zZXRTaXplKGNvbXBvbmVudC53aWR0aCwgY29tcG9uZW50LmhlaWdodCk7XG4gICAgICAgIC8vIGlubmVyV2lkdGgvaW5uZXJIZWlnaHRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5XZWJHTFJlbmRlcmVyU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIHVuaW5pdGlhbGl6ZWRSZW5kZXJlcnM6IHtcbiAgICBjb21wb25lbnRzOiBbV2ViR0xSZW5kZXJlciwgTm90KFdlYkdMUmVuZGVyZXJDb250ZXh0KV1cbiAgfSxcbiAgcmVuZGVyZXJzOiB7XG4gICAgY29tcG9uZW50czogW1dlYkdMUmVuZGVyZXIsIFdlYkdMUmVuZGVyZXJDb250ZXh0XSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGNoYW5nZWQ6IFtXZWJHTFJlbmRlcmVyXVxuICAgIH1cbiAgfSxcbiAgcmVuZGVyUGFzc2VzOiB7XG4gICAgY29tcG9uZW50czogW1JlbmRlclBhc3NdXG4gIH0sXG4gIGFjdGl2ZUNhbWVyYXM6IHtcbiAgICBjb21wb25lbnRzOiBbQ2FtZXJhLCBBY3RpdmVdLFxuICAgIGxpc3Rlbjoge1xuICAgICAgYWRkZWQ6IHRydWVcbiAgICB9XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgUGFyZW50LCBPYmplY3QzRCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1TeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKCkge1xuICAgIC8vIEhpZXJhcmNoeVxuICAgIGxldCBhZGRlZCA9IHRoaXMucXVlcmllcy5wYXJlbnQuYWRkZWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhZGRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVudGl0eSA9IGFkZGVkW2ldO1xuICAgICAgdmFyIHBhcmVudEVudGl0eSA9IGVudGl0eS5nZXRDb21wb25lbnQoUGFyZW50KS52YWx1ZTtcbiAgICAgIHZhciBwYXJlbnRPYmplY3QzRCA9IHBhcmVudEVudGl0eS5nZXRDb21wb25lbnQoT2JqZWN0M0QpLnZhbHVlO1xuICAgICAgdmFyIGNoaWxkT2JqZWN0M0QgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcbiAgICAgIHBhcmVudE9iamVjdDNELmFkZChjaGlsZE9iamVjdDNEKTtcbiAgICB9XG4gIH1cbn1cblxuVHJhbnNmb3JtU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIHBhcmVudDoge1xuICAgIGNvbXBvbmVudHM6IFtQYXJlbnQsIE9iamVjdDNEXSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHsgU3lzdGVtLCBOb3QgfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgQ2FtZXJhLCBPYmplY3QzRCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGluaXQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInJlc2l6ZVwiLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnF1ZXJpZXMuY2FtZXJhcy5yZXN1bHRzLmZvckVhY2goY2FtZXJhID0+IHtcbiAgICAgICAgICBsZXQgY29tcG9uZW50ID0gY2FtZXJhLmdldENvbXBvbmVudChDYW1lcmEpO1xuICAgICAgICAgIGlmIChjb21wb25lbnQuaGFuZGxlUmVzaXplKSB7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0TXV0YWJsZUNvbXBvbmVudChDYW1lcmEpLmFzcGVjdCA9XG4gICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBc3BlY3QgdXBkYXRlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIGV4ZWN1dGUoKSB7XG4gICAgbGV0IGNoYW5nZWQgPSB0aGlzLnF1ZXJpZXMuY2FtZXJhcy5jaGFuZ2VkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbmdlZC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVudGl0eSA9IGNoYW5nZWRbaV07XG5cbiAgICAgIGxldCBjb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KENhbWVyYSk7XG4gICAgICBsZXQgY2FtZXJhM2QgPSBlbnRpdHkuZ2V0TXV0YWJsZUNvbXBvbmVudChPYmplY3QzRCkudmFsdWU7XG5cbiAgICAgIGlmIChjYW1lcmEzZC5hc3BlY3QgIT09IGNvbXBvbmVudC5hc3BlY3QpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYW1lcmEgVXBkYXRlZFwiKTtcblxuICAgICAgICBjYW1lcmEzZC5hc3BlY3QgPSBjb21wb25lbnQuYXNwZWN0O1xuICAgICAgICBjYW1lcmEzZC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICB9XG4gICAgICAvLyBAdG9kbyBEbyBpdCBmb3IgdGhlIHJlc3Qgb2YgdGhlIHZhbHVlc1xuICAgIH1cblxuICAgIHRoaXMucXVlcmllcy5jYW1lcmFzVW5pbml0aWFsaXplZC5yZXN1bHRzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVudGl0eSk7XG5cbiAgICAgIGxldCBjb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KENhbWVyYSk7XG5cbiAgICAgIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoXG4gICAgICAgIGNvbXBvbmVudC5mb3YsXG4gICAgICAgIGNvbXBvbmVudC5hc3BlY3QsXG4gICAgICAgIGNvbXBvbmVudC5uZWFyLFxuICAgICAgICBjb21wb25lbnQuZmFyXG4gICAgICApO1xuXG4gICAgICBjYW1lcmEubGF5ZXJzLmVuYWJsZShjb21wb25lbnQubGF5ZXJzKTtcblxuICAgICAgZW50aXR5LmFkZENvbXBvbmVudChPYmplY3QzRCwgeyB2YWx1ZTogY2FtZXJhIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbkNhbWVyYVN5c3RlbS5xdWVyaWVzID0ge1xuICBjYW1lcmFzVW5pbml0aWFsaXplZDoge1xuICAgIGNvbXBvbmVudHM6IFtDYW1lcmEsIE5vdChPYmplY3QzRCldXG4gIH0sXG4gIGNhbWVyYXM6IHtcbiAgICBjb21wb25lbnRzOiBbQ2FtZXJhLCBPYmplY3QzRF0sXG4gICAgbGlzdGVuOiB7XG4gICAgICBjaGFuZ2VkOiBbQ2FtZXJhXVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiO1xuaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IFRleHRHZW9tZXRyeSwgT2JqZWN0M0QgfSBmcm9tIFwiLi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGNsYXNzIFRleHRHZW9tZXRyeVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGluaXQoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRm9udExvYWRlcigpO1xuICAgIHRoaXMuZm9udCA9IG51bGw7XG4gICAgbG9hZGVyLmxvYWQoXCIvYXNzZXRzL2ZvbnRzL2hlbHZldGlrZXJfcmVndWxhci50eXBlZmFjZS5qc29uXCIsIGZvbnQgPT4ge1xuICAgICAgdGhpcy5mb250ID0gZm9udDtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgZXhlY3V0ZSgpIHtcbiAgICBpZiAoIXRoaXMuZm9udCkgcmV0dXJuO1xuXG4gICAgdmFyIGNoYW5nZWQgPSB0aGlzLnF1ZXJpZXMuZW50aXRpZXMuY2hhbmdlZDtcbiAgICBjaGFuZ2VkLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgIHZhciB0ZXh0Q29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChUZXh0R2VvbWV0cnkpO1xuICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlRleHRHZW9tZXRyeSh0ZXh0Q29tcG9uZW50LnRleHQsIHtcbiAgICAgICAgZm9udDogdGhpcy5mb250LFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBoZWlnaHQ6IDAuMSxcbiAgICAgICAgY3VydmVTZWdtZW50czogMyxcbiAgICAgICAgYmV2ZWxFbmFibGVkOiB0cnVlLFxuICAgICAgICBiZXZlbFRoaWNrbmVzczogMC4wMyxcbiAgICAgICAgYmV2ZWxTaXplOiAwLjAzLFxuICAgICAgICBiZXZlbE9mZnNldDogMCxcbiAgICAgICAgYmV2ZWxTZWdtZW50czogM1xuICAgICAgfSk7XG4gICAgICB2YXIgb2JqZWN0ID0gZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoT2JqZWN0M0QpLnZhbHVlO1xuICAgICAgb2JqZWN0Lmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgfSk7XG5cbiAgICB2YXIgYWRkZWQgPSB0aGlzLnF1ZXJpZXMuZW50aXRpZXMuYWRkZWQ7XG4gICAgYWRkZWQuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgdmFyIHRleHRDb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFRleHRHZW9tZXRyeSk7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuVGV4dEdlb21ldHJ5KHRleHRDb21wb25lbnQudGV4dCwge1xuICAgICAgICBmb250OiB0aGlzLmZvbnQsXG4gICAgICAgIHNpemU6IDEsXG4gICAgICAgIGhlaWdodDogMC4xLFxuICAgICAgICBjdXJ2ZVNlZ21lbnRzOiAzLFxuICAgICAgICBiZXZlbEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGJldmVsVGhpY2tuZXNzOiAwLjAzLFxuICAgICAgICBiZXZlbFNpemU6IDAuMDMsXG4gICAgICAgIGJldmVsT2Zmc2V0OiAwLFxuICAgICAgICBiZXZlbFNlZ21lbnRzOiAzXG4gICAgICB9KTtcblxuICAgICAgdmFyIGNvbG9yID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmO1xuICAgICAgY29sb3IgPSAweGZmZmZmZjtcbiAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgcm91Z2huZXNzOiAwLjcsXG4gICAgICAgIG1ldGFsbmVzczogMC4wXG4gICAgICB9KTtcblxuICAgICAgdmFyIG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuXG4gICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KE9iamVjdDNELCB7IHZhbHVlOiBtZXNoIH0pO1xuICAgIH0pO1xuICB9XG59XG5cblRleHRHZW9tZXRyeVN5c3RlbS5xdWVyaWVzID0ge1xuICBlbnRpdGllczoge1xuICAgIGNvbXBvbmVudHM6IFtUZXh0R2VvbWV0cnldLFxuICAgIGxpc3Rlbjoge1xuICAgICAgYWRkZWQ6IHRydWUsXG4gICAgICBjaGFuZ2VkOiB0cnVlXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0ICogYXMgRUNTWSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5cbi8vIGNvbXBvbmVudHNcbmV4cG9ydCB7XG4gIEFjdGl2ZSxcbiAgQ2FtZXJhLFxuICBDYW1lcmFSaWcsXG4gIERyYWdnYWJsZSxcbiAgRHJhZ2dpbmcsXG4gIEdlb21ldHJ5LFxuICBHTFRGTW9kZWwsXG4gIE1hdGVyaWFsLFxuICBPYmplY3QzRCxcbiAgUGFyZW50LFxuICBQb3NpdGlvbixcbiAgUm90YXRpb24sXG4gIFJlbmRlclBhc3MsXG4gIFNjZW5lLFxuICBTa3ksXG4gIFNreUJveCxcbiAgVGV4dEdlb21ldHJ5LFxuICBUcmFuc2Zvcm0sXG4gIFZpc2libGUsXG4gIFZSQ29udHJvbGxlclxufSBmcm9tIFwiLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5cbi8vIHN5c3RlbXNcbmV4cG9ydCB7IEdlb21ldHJ5U3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9HZW9tZXRyeVN5c3RlbS5qc1wiO1xuZXhwb3J0IHsgR0xURkxvYWRlclN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvR0xURkxvYWRlclN5c3RlbS5qc1wiO1xuZXhwb3J0IHsgU2t5Qm94U3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9Ta3lCb3hTeXN0ZW0uanNcIjtcbmV4cG9ydCB7IFZpc2liaWxpdHlTeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL1Zpc2liaWxpdHlTeXN0ZW0uanNcIjtcbmV4cG9ydCB7XG4gIFdlYkdMUmVuZGVyZXJTeXN0ZW0sXG4gIFdlYkdMUmVuZGVyZXJDb250ZXh0XG59IGZyb20gXCIuL3N5c3RlbXMvV2ViR0xSZW5kZXJlclN5c3RlbS5qc1wiO1xuZXhwb3J0IHsgVHJhbnNmb3JtU3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9UcmFuc2Zvcm1TeXN0ZW0uanNcIjtcbmV4cG9ydCB7IENhbWVyYVN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLmpzXCI7XG5leHBvcnQgeyBUZXh0R2VvbWV0cnlTeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL1RleHRHZW9tZXRyeVN5c3RlbS5qc1wiO1xuXG5pbXBvcnQgeyBUcmFuc2Zvcm1TeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL1RyYW5zZm9ybVN5c3RlbS5qc1wiO1xuaW1wb3J0IHsgQ2FtZXJhU3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9DYW1lcmFTeXN0ZW0uanNcIjtcbmltcG9ydCB7IFdlYkdMUmVuZGVyZXJTeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL1dlYkdMUmVuZGVyZXJTeXN0ZW0uanNcIjtcbmltcG9ydCB7IE9iamVjdDNEIH0gZnJvbSBcIi4vY29tcG9uZW50cy9PYmplY3QzRC5qc1wiO1xuaW1wb3J0IHsgQ2FtZXJhUmlnIH0gZnJvbSBcIi4vY29tcG9uZW50cy9DYW1lcmFSaWcuanNcIjtcbmltcG9ydCB7XG4gIFdlYkdMUmVuZGVyZXIsXG4gIFNjZW5lLFxuICBSZW5kZXJQYXNzLFxuICBDYW1lcmFcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCh3b3JsZCkge1xuICB3b3JsZFxuICAgIC5yZWdpc3RlclN5c3RlbShUcmFuc2Zvcm1TeXN0ZW0pXG4gICAgLnJlZ2lzdGVyU3lzdGVtKENhbWVyYVN5c3RlbSlcbiAgICAucmVnaXN0ZXJTeXN0ZW0oV2ViR0xSZW5kZXJlclN5c3RlbSwgeyBwcmlvcml0eTogMSB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEZWZhdWx0KHdvcmxkID0gbmV3IEVDU1kuV29ybGQoKSwgb3B0aW9ucykge1xuICBjb25zdCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpO1xuXG4gIGluaXQod29ybGQpO1xuXG4gIGxldCBzY2VuZSA9IHdvcmxkXG4gICAgLmNyZWF0ZUVudGl0eSgpXG4gICAgLmFkZENvbXBvbmVudChTY2VuZSlcbiAgICAuYWRkQ29tcG9uZW50KE9iamVjdDNELCB7IHZhbHVlOiBuZXcgVEhSRUUuU2NlbmUoKSB9KTtcblxuICBsZXQgcmVuZGVyZXIgPSB3b3JsZC5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoV2ViR0xSZW5kZXJlciwge1xuICAgIGFuaW1hdGlvbkxvb3A6ICgpID0+IHtcbiAgICAgIHdvcmxkLmV4ZWN1dGUoY2xvY2suZ2V0RGVsdGEoKSwgY2xvY2suZWxhcHNlZFRpbWUpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gY2FtZXJhIHJpZyAmIGNvbnRyb2xsZXJzXG4gIHZhciBjYW1lcmEgPSBudWxsLFxuICAgIGNhbWVyYVJpZyA9IG51bGw7XG5cbiAgaWYgKG9wdGlvbnMudnIpIHtcbiAgICBjYW1lcmFSaWcgPSB3b3JsZC5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoQ2FtZXJhUmlnKTtcbiAgfSBlbHNlIHtcbiAgICBjYW1lcmEgPSB3b3JsZC5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoQ2FtZXJhLCB7XG4gICAgICBmb3Y6IDkwLFxuICAgICAgYXNwZWN0OiB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIG5lYXI6IDEsXG4gICAgICBmYXI6IDEwMDAsXG4gICAgICBsYXllcnM6IDEsXG4gICAgICBoYW5kbGVSZXNpemU6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGxldCByZW5kZXJQYXNzID0gd29ybGQuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KFJlbmRlclBhc3MsIHtcbiAgICBzY2VuZTogc2NlbmUsXG4gICAgY2FtZXJhOiBjYW1lcmFcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB3b3JsZCxcbiAgICBlbnRpdGllczoge1xuICAgICAgc2NlbmUsXG4gICAgICBjYW1lcmEsXG4gICAgICBjYW1lcmFSaWcsXG4gICAgICByZW5kZXJlcixcbiAgICAgIHJlbmRlclBhc3NcbiAgICB9XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgRHJhZ2dhYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy52YWx1ZSA9IGZhbHNlO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbG9yID0gMHhmZjAwMDA7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiO1xuXG5leHBvcnQgY2xhc3MgUG9zaXRpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIFJvdGF0aW9uIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yb3RhdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnJvdGF0aW9uLnNldCgwLCAwLCAwKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNreSB7XG4gIGNvbnN0cnVjdG9yKCkge31cbiAgcmVzZXQoKSB7fVxufVxuIiwiZXhwb3J0IGNsYXNzIFZSQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaWQgPSAwO1xuICAgIHRoaXMuY29udHJvbGxlciA9IG51bGw7XG4gIH1cbiAgcmVzZXQoKSB7fVxufVxuIl0sIm5hbWVzIjpbIkFjdGl2ZSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJyZXNldCIsInZhbHVlIiwiQ2FtZXJhUmlnIiwibGVmdEhhbmQiLCJyaWdodEhhbmQiLCJjYW1lcmEiLCJEcmFnZ2luZyIsIlRhZ0NvbXBvbmVudCIsIkdlb21ldHJ5IiwicHJpbWl0aXZlIiwiR0xURk1vZGVsIiwiT2JqZWN0M0QiLCJQYXJlbnQiLCJSZW5kZXJQYXNzIiwic2NlbmUiLCJTY2VuZSIsIlNreUJveCIsInRleHR1cmUiLCJ0eXBlIiwiVGV4dEdlb21ldHJ5IiwiVHJhbnNmb3JtIiwicG9zaXRpb24iLCJUSFJFRS5WZWN0b3IzIiwicm90YXRpb24iLCJzcmMiLCJjb3B5Iiwic2V0IiwiVmlzaWJsZSIsIkNhbWVyYSIsImZvdiIsImFzcGVjdCIsIm5lYXIiLCJmYXIiLCJsYXllcnMiLCJoYW5kbGVSZXNpemUiLCJXZWJHTFJlbmRlcmVyIiwidnIiLCJhbnRpYWxpYXMiLCJnYW1tYUlucHV0IiwiZ2FtbWFPdXRwdXQiLCJzaGFkb3dNYXAiLCJHZW9tZXRyeVN5c3RlbSIsIlN5c3RlbSIsInF1ZXJpZXMiLCJlbnRpdGllcyIsInJlbW92ZWQiLCJmb3JFYWNoIiwiYWRkZWQiLCJlbnRpdHkiLCJnZW9tZXRyeSIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsIlRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnkiLCJyYWRpdXMiLCJ0dWJlIiwicmFkaWFsU2VnbWVudHMiLCJ0dWJ1bGFyU2VnbWVudHMiLCJUSFJFRS5JY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5IiwiVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkiLCJ3aWR0aCIsImhlaWdodCIsImRlcHRoIiwiY29sb3IiLCJNYXRoIiwicmFuZG9tIiwibWF0ZXJpYWwiLCJUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsIiwiZmxhdFNoYWRpbmciLCJvYmplY3QiLCJUSFJFRS5NZXNoIiwiY2FzdFNoYWRvdyIsInJlY2VpdmVTaGFkb3ciLCJoYXNDb21wb25lbnQiLCJ0cmFuc2Zvcm0iLCJ4IiwieSIsInoiLCJhZGRDb21wb25lbnQiLCJhZGQiLCJjb21wb25lbnRzIiwibGlzdGVuIiwibG9hZGVyIiwiR0xURkxvYWRlciIsInNldFBhdGgiLCJHTFRGTG9hZGVyU3lzdGVtIiwiaSIsImxlbmd0aCIsImxvYWQiLCJ1cmwiLCJnbHRmIiwiU2t5Qm94U3lzdGVtIiwicmVzdWx0cyIsInNreWJveCIsImdyb3VwIiwiVEhSRUUuR3JvdXAiLCJzY2FsZSIsInRleHR1cmVzIiwiZ2V0VGV4dHVyZXNGcm9tQXRsYXNGaWxlIiwidGV4dHVyZVVybCIsIm1hdGVyaWFscyIsImoiLCJwdXNoIiwiVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwiLCJtYXAiLCJza3lCb3giLCJtYXRlcmlhbHNSIiwic2t5Qm94UiIsImNvbnNvbGUiLCJ3YXJuIiwiYXRsYXNJbWdVcmwiLCJ0aWxlc051bSIsIlRIUkVFLlRleHR1cmUiLCJUSFJFRS5JbWFnZUxvYWRlciIsImltYWdlT2JqIiwiY2FudmFzIiwiY29udGV4dCIsInRpbGVXaWR0aCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIm5lZWRzVXBkYXRlIiwiTm90IiwiVmlzaWJpbGl0eVN5c3RlbSIsImdldE11dGFibGVDb21wb25lbnQiLCJ2aXNpYmxlIiwicHJvY2Vzc1Zpc2liaWxpdHkiLCJjaGFuZ2VkIiwiV2ViR0xSZW5kZXJlckNvbnRleHQiLCJXZWJHTFJlbmRlcmVyU3lzdGVtIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbmRlcmVycyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInJlbmRlcmVyRW50aXR5IiwicmVuZGVyZXIiLCJyZW5kZXJQYXNzZXMiLCJhY3RpdmVDYW1lcmFzIiwiY2FtZXJhRW50aXR5IiwicmVuZGVyIiwidW5pbml0aWFsaXplZFJlbmRlcmVycyIsIlRIUkVFLldlYkdMUmVuZGVyZXIiLCJhbmltYXRpb25Mb29wIiwic2V0QW5pbWF0aW9uTG9vcCIsInNldFBpeGVsUmF0aW8iLCJkZXZpY2VQaXhlbFJhdGlvIiwic2V0U2l6ZSIsImVuYWJsZWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiV0VCVlIiLCJjcmVhdGVCdXR0b24iLCJyZWZlcmVuY2VTcGFjZVR5cGUiLCJUcmFuc2Zvcm1TeXN0ZW0iLCJwYXJlbnQiLCJwYXJlbnRPYmplY3QzRCIsImNoaWxkT2JqZWN0M0QiLCJDYW1lcmFTeXN0ZW0iLCJjYW1lcmFzIiwibG9nIiwiY2FtZXJhM2QiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4IiwiY2FtZXJhc1VuaW5pdGlhbGl6ZWQiLCJUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSIsImVuYWJsZSIsIlRleHRHZW9tZXRyeVN5c3RlbSIsImluaXRpYWxpemVkIiwiVEhSRUUuRm9udExvYWRlciIsImZvbnQiLCJ0ZXh0Q29tcG9uZW50IiwiVEhSRUUuVGV4dEdlb21ldHJ5IiwidGV4dCIsInNpemUiLCJjdXJ2ZVNlZ21lbnRzIiwiYmV2ZWxFbmFibGVkIiwiYmV2ZWxUaGlja25lc3MiLCJiZXZlbFNpemUiLCJiZXZlbE9mZnNldCIsImJldmVsU2VnbWVudHMiLCJUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsIm1lc2giLCJpbml0Iiwid29ybGQiLCJyZWdpc3RlclN5c3RlbSIsInByaW9yaXR5IiwiaWQiLCJjb250cm9sbGVyIiwiRUNTWS5Xb3JsZCIsIm9wdGlvbnMiLCJjbG9jayIsIlRIUkVFLkNsb2NrIiwiY3JlYXRlRW50aXR5IiwiVEhSRUUuU2NlbmUiLCJleGVjdXRlIiwiZ2V0RGVsdGEiLCJlbGFwc2VkVGltZSIsImNhbWVyYVJpZyIsInJlbmRlclBhc3MiXSwibWFwcGluZ3MiOiJ5aUJBQU8sTUFBTUEsRUFDWEMsY0FDRUMsS0FBS0MsUUFHUEYsUUFDRUMsS0FBS0UsT0FBUSxHQ05WLE1BQU1DLEVBQ1hKLGNBQ0VDLEtBQUtDLFFBR1BGLFFBQ0VDLEtBQUtJLFNBQVcsS0FDaEJKLEtBQUtLLFVBQVksS0FDakJMLEtBQUtNLE9BQVMsTUNQWCxNQUFNQyxVQUFpQkMsZ0JDRHZCLE1BQU1DLEVBQ1hWLGNBQ0VDLEtBQUtVLFVBQVksTUFHbkJYLFFBQ0VDLEtBQUtVLFVBQVksT0NOZCxNQUFNQyxHQ0FOLE1BQU1DLEVBQ1hiLGNBQ0VDLEtBQUtFLE1BQVEsS0FHZkgsUUFDRUMsS0FBS0UsTUFBUSxNQ05WLE1BQU1XLEVBQ1hkLGNBQ0VDLEtBQUtFLE1BQVEsS0FHZkgsUUFDRUMsS0FBS0UsTUFBUSxNQ05WLE1BQU1ZLEVBQ1hmLGNBQ0VDLEtBQUtlLE1BQVEsS0FDYmYsS0FBS00sT0FBUyxLQUdoQlAsUUFDRUMsS0FBS2UsTUFBUSxLQUNiZixLQUFLTSxPQUFTLE1DUlgsTUFBTVUsRUFDWGpCLGNBQ0VDLEtBQUtlLE1BQVEsS0FHZmhCLFFBQ0VDLEtBQUtlLE1BQVEsTUNOVixNQUFNRSxFQUNYbEIsY0FDRUMsS0FBS2tCLFFBQVUsR0FDZmxCLEtBQUttQixLQUFPLEdBRWRwQixRQUNFQyxLQUFLa0IsUUFBVSxHQUNmbEIsS0FBS21CLEtBQU8sSUNQVCxNQUFNQyxFQUNYckIsVUNDSyxNQUFNc0IsRUFDWHRCLGNBQ0VDLEtBQUtzQixTQUFXLElBQUlDLFVB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
