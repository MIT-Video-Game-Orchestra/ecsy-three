!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("ecsy"),require("three"),require("three/examples/jsm/loaders/GLTFLoader.js"),require("three/examples/jsm/vr/WebVR.js")):"function"==typeof define&&define.amd?define(["exports","ecsy","three","three/examples/jsm/loaders/GLTFLoader.js","three/examples/jsm/vr/WebVR.js"],t):(e=e||self,function(){var s=e.ECSYTHREE,n=e.ECSYTHREE={};t(n,e.ECSY,e.THREE,e.GLTFLoader_js,e.WebVR_js),n.noConflict=function(){return e.ECSYTHREE=s,n}}())}(this,(function(e,t,s,n,i){"use strict";class o{constructor(){this.reset()}reset(){this.value=!1}}class r{constructor(){this.reset()}reset(){this.leftHand=null,this.rightHand=null,this.camera=null}}class a extends t.TagComponent{}class l{constructor(){this.primitive="box"}reset(){this.primitive="box"}}class c{}class d{constructor(){this.value=null}reset(){this.value=null}}class h{constructor(){this.value=null}reset(){this.value=null}}class u{constructor(){this.scene=null,this.camera=null}reset(){this.scene=null,this.camera=null}}class m{constructor(){this.scene=null}reset(){this.scene=null}}class p{constructor(){this.texture="",this.type=""}reset(){this.texture="",this.type=""}}class v{reset(){}}class g{constructor(){this.position=new s.Vector3,this.rotation=new s.Vector3}copy(e){this.position.copy(e.position),this.rotation.copy(e.rotation)}reset(){this.position.set(0,0,0),this.rotation.set(0,0,0)}}class f{constructor(){this.reset()}reset(){this.value=!1}}class y{constructor(){this.fov=45,this.aspect=1,this.near=1,this.far=1e3,this.layers=0,this.handleResize=!0}}class w{constructor(){this.vr=!0,this.antialias=!0,this.handleResize=!0,this.gammaInput=!0,this.gammaOutput=!0,this.shadowMap=!1}}class C extends t.System{execute(){this.queries.entities.removed.forEach(()=>{}),this.queries.entities.added.forEach(e=>{var t,n=e.getComponent(l);switch(n.primitive){case"torus":t=new s.TorusBufferGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments);break;case"sphere":t=new s.IcosahedronBufferGeometry(n.radius,1);break;case"box":t=new s.BoxBufferGeometry(n.width,n.height,n.depth)}var i="torus"===n.primitive?10066176:16777215*Math.random(),o=new s.MeshLambertMaterial({color:i,flatShading:!0}),r=new s.Mesh(t,o);if(r.castShadow=!0,r.receiveShadow=!0,e.hasComponent(g)){var a=e.getComponent(g);r.position.copy(a.position),a.rotation&&r.rotation.set(a.rotation.x,a.rotation.y,a.rotation.z)}e.addComponent(d,{value:r})})}}C.queries={entities:{components:[l],listen:{added:!0,removed:!0}}};var x=(new n.GLTFLoader).setPath("/assets/");class b extends t.System{execute(){var e=this.queries.entities.added;for(let n=0;n<e.length;n++){var t=e[n],s=t.getComponent(c);x.load(s.url,e=>{t.hasComponent(h)&&t.getComponent(h).value.add(e.scene),t.addComponent(d,{value:e.scene})})}}}b.queries={entities:{components:[c],listen:{added:!0}}};class S extends t.System{execute(){let e=this.queries.entities.results;for(let t=0;t<e.length;t++){let n=e[t],i=n.getComponent(p),o=new s.Group,r=new s.BoxBufferGeometry(100,100,100);if(r.scale(1,1,-1),"cubemap-stereo"===i.type){let e=E(i.textureUrl,12),t=[];for(let n=0;n<6;n++)t.push(new s.MeshBasicMaterial({map:e[n]}));let a=new s.Mesh(r,t);a.layers.set(1),o.add(a);let l=[];for(let t=6;t<12;t++)l.push(new s.MeshBasicMaterial({map:e[t]}));let c=new s.Mesh(r,l);c.layers.set(2),o.add(c),n.addComponent(d,{value:o})}else console.warn("Unknown skybox type: ",i.type)}}}function E(e,t){let n=[];for(let e=0;e<t;e++)n[e]=new s.Texture;return(new s.ImageLoader).load(e,(function(e){let t,s,i=e.height;for(let o=0;o<n.length;o++)s=(t=document.createElement("canvas")).getContext("2d"),t.height=i,t.width=i,s.drawImage(e,i*o,0,i,i,0,0,i,i),n[o].image=t,n[o].needsUpdate=!0})),n}S.queries={entities:{components:[p,t.Not(d)]}};class q extends t.System{processVisibility(e){e.forEach(e=>{e.getMutableComponent(d).value.visible=e.getComponent(f).value})}execute(){this.processVisibility(this.queries.entities.added),this.processVisibility(this.queries.entities.changed)}}q.queries={entities:{components:[f,d],listen:{added:!0,changed:[f]}}};class M{constructor(){this.value=null}}class R extends t.System{init(){window.addEventListener("resize",()=>{this.queries.renderers.results.forEach(e=>{})},!1)}execute(){this.queries.renderers.results.forEach(e=>{var t=e.getComponent(M).value;this.queries.renderPasses.results.forEach(e=>{var s=e.getComponent(u).scene.getComponent(d).value;this.queries.activeCameras.results.forEach(e=>{var n=e.getComponent(d).value;t.render(s,n)})})}),this.queries.uninitializedRenderers.results.forEach(e=>{var t=e.getComponent(w),n=new s.WebGLRenderer({antialias:t.antialias});t.animationLoop&&n.setAnimationLoop(t.animationLoop),n.setPixelRatio(window.devicePixelRatio),t.handleResize&&n.setSize(window.innerWidth,window.innerHeight),n.gammaInput=t.gammaInput,n.gammaOutput=t.gammaOutput,n.shadowMap.enabled=t.shadowMap,document.body.appendChild(n.domElement),t.vr&&(n.vr.enabled=!0,document.body.appendChild(i.WEBVR.createButton(n,{referenceSpaceType:"local"}))),e.addComponent(M,{value:n})}),this.queries.renderers.changed.forEach(e=>{var t=e.getComponent(w),s=e.getComponent(M).value;t.width===s.width&&t.height===s.height||s.setSize(t.width,t.height)})}}R.queries={uninitializedRenderers:{components:[w,t.Not(M)]},renderers:{components:[M],listen:{changed:[w]}},renderPasses:{components:[u]},activeCameras:{components:[y,o],listen:{added:!0}}};class L extends t.System{execute(){let e=this.queries.parent.added;for(var t=0;t<e.length;t++){var s=e[t],n=s.getComponent(h).value.getComponent(d).value,i=s.getComponent(d).value;n.add(i)}}}L.queries={parent:{components:[h,d],listen:{added:!0}}};class T extends t.System{init(){window.addEventListener("resize",()=>{this.queries.cameras.results.forEach(e=>{e.getComponent(y).handleResize&&(e.getMutableComponent(y).aspect=window.innerWidth/window.innerHeight,console.log("Aspect updated"))})},!1)}execute(){let e=this.queries.cameras.changed;for(let t=0;t<e.length;t++){let s=e[t],n=s.getComponent(y),i=s.getMutableComponent(d).value;i.aspect!==n.aspect&&(console.log("Camera Updated"),i.aspect=n.aspect,i.updateProjectionMatrix())}this.queries.camerasUninitialized.results.forEach(e=>{console.log(e);let t=e.getComponent(y),n=new s.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);n.layers.enable(t.layers),e.addComponent(d,{value:n})})}}T.queries={camerasUninitialized:{components:[y,t.Not(d)]},cameras:{components:[y,d],listen:{changed:[y]}}};class z extends t.System{init(){this.initialized=!1;var e=new s.FontLoader;this.font=null,e.load("/assets/fonts/helvetiker_regular.typeface.json",e=>{this.font=e,this.initialized=!0})}execute(){this.font&&(this.queries.entities.changed.forEach(e=>{var t=e.getComponent(v),n=new s.TextGeometry(t.text,{font:this.font,size:1,height:.1,curveSegments:3,bevelEnabled:!0,bevelThickness:.03,bevelSize:.03,bevelOffset:0,bevelSegments:3});e.getMutableComponent(d).value.geometry=n}),this.queries.entities.added.forEach(e=>{var t=e.getComponent(v),n=new s.TextGeometry(t.text,{font:this.font,size:1,height:.1,curveSegments:3,bevelEnabled:!0,bevelThickness:.03,bevelSize:.03,bevelOffset:0,bevelSegments:3});Math.random();var i=new s.MeshStandardMaterial({color:16777215,roughness:.7,metalness:0}),o=new s.Mesh(n,i);e.addComponent(d,{value:o})}))}}function G(e){e.registerSystem(L).registerSystem(T).registerSystem(R,{priority:1})}z.queries={entities:{components:[v],listen:{added:!0,changed:!0}}},e.Active=o,e.Camera=y,e.CameraRig=r,e.CameraSystem=T,e.Draggable=class{constructor(){this.reset()}reset(){this.value=!1}},e.Dragging=a,e.GLTFLoaderSystem=b,e.GLTFModel=c,e.Geometry=l,e.GeometrySystem=C,e.Material=class{constructor(){this.color=16711680}},e.Object3D=d,e.Parent=h,e.Position=class{constructor(){this.position=new s.Vector3}reset(){this.position.set(0,0,0)}},e.RenderPass=u,e.Rotation=class{constructor(){this.rotation=new s.Vector3}reset(){this.rotation.set(0,0,0)}},e.Scene=m,e.Sky=class{constructor(){}reset(){}},e.SkyBox=p,e.SkyBoxSystem=S,e.TextGeometry=v,e.TextGeometrySystem=z,e.Transform=g,e.TransformSystem=L,e.VRController=class{constructor(){this.id=0,this.controller=null}reset(){}},e.VisibilitySystem=q,e.Visible=f,e.WebGLRendererContext=M,e.WebGLRendererSystem=R,e.init=G,e.initializeDefault=function(e=new t.World,n){new s.Clock,G(e);let i=e.createEntity().addComponent(m).addComponent(d,{value:new s.Scene}),o=e.createEntity().addComponent(w,{});var a=null,l=null;n.vr?l=e.createEntity().addComponent(r).addComponent(h,{value:i}):a=e.createEntity().addComponent(y,{fov:90,aspect:window.innerWidth/window.innerHeight,near:1,far:1e3,layers:1,handleResize:!0});let c=e.createEntity().addComponent(u,{scene:i,camera:a});return{world:e,entities:{scene:i,camera:a,cameraRig:l,renderer:o,renderPass:c}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNzeS10aHJlZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wb25lbnRzL0FjdGl2ZS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL0NhbWVyYVJpZy5qcyIsIi4uL3NyYy9jb21wb25lbnRzL0RyYWdnaW5nLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvR2VvbWV0cnkuanMiLCIuLi9zcmMvY29tcG9uZW50cy9HTFRGTW9kZWwuanMiLCIuLi9zcmMvY29tcG9uZW50cy9PYmplY3QzRC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1BhcmVudC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1JlbmRlclBhc3MuanMiLCIuLi9zcmMvY29tcG9uZW50cy9TY2VuZS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1NreWJveC5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1RleHRHZW9tZXRyeS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1RyYW5zZm9ybS5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1Zpc2libGUuanMiLCIuLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcyIsIi4uL3NyYy9zeXN0ZW1zL0dlb21ldHJ5U3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvR0xURkxvYWRlclN5c3RlbS5qcyIsIi4uL3NyYy9zeXN0ZW1zL1NreUJveFN5c3RlbS5qcyIsIi4uL3NyYy9zeXN0ZW1zL1Zpc2liaWxpdHlTeXN0ZW0uanMiLCIuLi9zcmMvc3lzdGVtcy9XZWJHTFJlbmRlcmVyU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvVHJhbnNmb3JtU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLmpzIiwiLi4vc3JjL3N5c3RlbXMvVGV4dEdlb21ldHJ5U3lzdGVtLmpzIiwiLi4vc3JjL2luZGV4LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvRHJhZ2dhYmxlLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvTWF0ZXJpYWwuanMiLCIuLi9zcmMvY29tcG9uZW50cy9Qb3NpdGlvbi5qcyIsIi4uL3NyYy9jb21wb25lbnRzL1JvdGF0aW9uLmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvU2t5LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvVlJDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBY3RpdmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYW1lcmFSaWcge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLmxlZnRIYW5kID0gbnVsbDtcbiAgICB0aGlzLnJpZ2h0SGFuZCA9IG51bGw7XG4gICAgdGhpcy5jYW1lcmEgPSBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBUYWdDb21wb25lbnQgfSBmcm9tIFwiZWNzeVwiO1xuZXhwb3J0IGNsYXNzIERyYWdnaW5nIGV4dGVuZHMgVGFnQ29tcG9uZW50IHt9XG4iLCJleHBvcnQgY2xhc3MgR2VvbWV0cnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IFwiYm94XCI7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnByaW1pdGl2ZSA9IFwiYm94XCI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBHTFRGTW9kZWwge31cbiIsImV4cG9ydCBjbGFzcyBPYmplY3QzRCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQYXJlbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUmVuZGVyUGFzcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2NlbmUgPSBudWxsO1xuICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuc2NlbmUgPSBudWxsO1xuICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNjZW5lIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zY2VuZSA9IG51bGw7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnNjZW5lID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNreUJveCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGV4dHVyZSA9IFwiXCI7XG4gICAgdGhpcy50eXBlID0gXCJcIjtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLnRleHR1cmUgPSBcIlwiO1xuICAgIHRoaXMudHlwZSA9IFwiXCI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBUZXh0R2VvbWV0cnkge1xuICByZXNldCgpIHt9XG59XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIFRyYW5zZm9ybSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMucm90YXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICB9XG5cbiAgY29weShzcmMpIHtcbiAgICB0aGlzLnBvc2l0aW9uLmNvcHkoc3JjLnBvc2l0aW9uKTtcbiAgICB0aGlzLnJvdGF0aW9uLmNvcHkoc3JjLnJvdGF0aW9uKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICAgIHRoaXMucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVmlzaWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudmFsdWUgPSBmYWxzZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50Q2xhc3MgfSBmcm9tIFwiZWNzeVwiO1xuXG5leHBvcnQgeyBBY3RpdmUgfSBmcm9tIFwiLi9BY3RpdmUuanNcIjtcbmV4cG9ydCB7IENhbWVyYVJpZyB9IGZyb20gXCIuL0NhbWVyYVJpZy5qc1wiO1xuZXhwb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSBcIi4vRHJhZ2dhYmxlLmpzXCI7XG5leHBvcnQgeyBEcmFnZ2luZyB9IGZyb20gXCIuL0RyYWdnaW5nLmpzXCI7XG5leHBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL0dlb21ldHJ5LmpzXCI7XG5leHBvcnQgeyBHTFRGTW9kZWwgfSBmcm9tIFwiLi9HTFRGTW9kZWwuanNcIjtcbmV4cG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWwuanNcIjtcbmV4cG9ydCB7IE9iamVjdDNEIH0gZnJvbSBcIi4vT2JqZWN0M0QuanNcIjtcbmV4cG9ydCB7IFBhcmVudCB9IGZyb20gXCIuL1BhcmVudC5qc1wiO1xuZXhwb3J0IHsgUG9zaXRpb24gfSBmcm9tIFwiLi9Qb3NpdGlvbi5qc1wiO1xuZXhwb3J0IHsgUmVuZGVyUGFzcyB9IGZyb20gXCIuL1JlbmRlclBhc3MuanNcIjtcbmV4cG9ydCB7IFJvdGF0aW9uIH0gZnJvbSBcIi4vUm90YXRpb24uanNcIjtcbmV4cG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4vU2NlbmUuanNcIjtcbmV4cG9ydCB7IFNreSB9IGZyb20gXCIuL1NreS5qc1wiO1xuZXhwb3J0IHsgU2t5Qm94IH0gZnJvbSBcIi4vU2t5Ym94LmpzXCI7XG5leHBvcnQgeyBUZXh0R2VvbWV0cnkgfSBmcm9tIFwiLi9UZXh0R2VvbWV0cnkuanNcIjtcbmV4cG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCIuL1RyYW5zZm9ybS5qc1wiO1xuZXhwb3J0IHsgVmlzaWJsZSB9IGZyb20gXCIuL1Zpc2libGUuanNcIjtcbmV4cG9ydCB7IFZSQ29udHJvbGxlciB9IGZyb20gXCIuL1ZSQ29udHJvbGxlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5mb3YgPSA0NTtcbiAgICB0aGlzLmFzcGVjdCA9IDE7XG4gICAgdGhpcy5uZWFyID0gMTtcbiAgICB0aGlzLmZhciA9IDEwMDA7XG4gICAgdGhpcy5sYXllcnMgPSAwO1xuICAgIHRoaXMuaGFuZGxlUmVzaXplID0gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2ViR0xSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudnIgPSB0cnVlO1xuICAgIHRoaXMuYW50aWFsaWFzID0gdHJ1ZTtcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZSA9IHRydWU7XG4gICAgdGhpcy5nYW1tYUlucHV0ID0gdHJ1ZTtcbiAgICB0aGlzLmdhbW1hT3V0cHV0ID0gdHJ1ZTtcbiAgICB0aGlzLnNoYWRvd01hcCA9IGZhbHNlO1xuICB9XG59XG5cblxuLypcbmV4cG9ydCBjb25zdCBXZWJHTFJlbmRlcmVyID0gY3JlYXRlQ29tcG9uZW50Q2xhc3MoXG4gIHtcbiAgICB2cjogeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgYW50aWFsaWFzOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBoYW5kbGVSZXNpemU6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGdhbW1hSW5wdXQ6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGdhbW1hT3V0cHV0OiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBzaGFkb3dNYXA6IHsgZGVmYXVsdDogZmFsc2UgfVxuICB9LFxuICBcIldlYkdMUmVuZGVyZXJcIlxuKTtcbiovIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHtcbiAgR2VvbWV0cnksXG4gIE9iamVjdDNELFxuICBUcmFuc2Zvcm0sXG4gIC8vICBFbGVtZW50LFxuICAvLyAgRHJhZ2dhYmxlLFxuICBQYXJlbnRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvaW5kZXguanNcIjtcblxuLyoqXG4gKiBDcmVhdGUgYSBNZXNoIGJhc2VkIG9uIHRoZSBbR2VvbWV0cnldIGNvbXBvbmVudCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBlbnRpdHkgdXNpbmcgYSBbT2JqZWN0M0RdIGNvbXBvbmVudFxuICovXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKCkge1xuICAgIC8vIFJlbW92ZWRcbiAgICB0aGlzLnF1ZXJpZXMuZW50aXRpZXMucmVtb3ZlZC5mb3JFYWNoKCgvKmVudGl0eSovKSA9PiB7XG4gICAgICAvKlxuICAgICAgdmFyIG9iamVjdCA9IGVudGl0eS5nZXRSZW1vdmVkQ29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcbiAgICAgIHZhciBwYXJlbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFBhcmVudCwgdHJ1ZSkudmFsdWU7XG4gICAgICBwYXJlbnQuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZS5yZW1vdmUob2JqZWN0KTtcbiAgICAgICovXG4gICAgfSk7XG5cbiAgICAvLyBBZGRlZFxuICAgIHRoaXMucXVlcmllcy5lbnRpdGllcy5hZGRlZC5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChHZW9tZXRyeSk7XG5cbiAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgIHN3aXRjaCAoY29tcG9uZW50LnByaW1pdGl2ZSkge1xuICAgICAgICBjYXNlIFwidG9ydXNcIjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Ub3J1c0J1ZmZlckdlb21ldHJ5KFxuICAgICAgICAgICAgICBjb21wb25lbnQucmFkaXVzLFxuICAgICAgICAgICAgICBjb21wb25lbnQudHViZSxcbiAgICAgICAgICAgICAgY29tcG9uZW50LnJhZGlhbFNlZ21lbnRzLFxuICAgICAgICAgICAgICBjb21wb25lbnQudHVidWxhclNlZ21lbnRzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNwaGVyZVwiOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnkoY29tcG9uZW50LnJhZGl1cywgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYm94XCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkoXG4gICAgICAgICAgICAgIGNvbXBvbmVudC53aWR0aCxcbiAgICAgICAgICAgICAgY29tcG9uZW50LmhlaWdodCxcbiAgICAgICAgICAgICAgY29tcG9uZW50LmRlcHRoXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbG9yID1cbiAgICAgICAgY29tcG9uZW50LnByaW1pdGl2ZSA9PT0gXCJ0b3J1c1wiID8gMHg5OTk5MDAgOiBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmY7XG5cbiAgICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtcbiAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8qXG4gICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgIHJvdWdobmVzczogMC43LFxuICAgICAgICBtZXRhbG5lc3M6IDAuMCxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pO1xuKi9cblxuICAgICAgdmFyIG9iamVjdCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gICAgICBvYmplY3QuY2FzdFNoYWRvdyA9IHRydWU7XG4gICAgICBvYmplY3QucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG5cbiAgICAgIGlmIChlbnRpdHkuaGFzQ29tcG9uZW50KFRyYW5zZm9ybSkpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgb2JqZWN0LnBvc2l0aW9uLmNvcHkodHJhbnNmb3JtLnBvc2l0aW9uKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybS5yb3RhdGlvbikge1xuICAgICAgICAgIG9iamVjdC5yb3RhdGlvbi5zZXQoXG4gICAgICAgICAgICB0cmFuc2Zvcm0ucm90YXRpb24ueCxcbiAgICAgICAgICAgIHRyYW5zZm9ybS5yb3RhdGlvbi55LFxuICAgICAgICAgICAgdHJhbnNmb3JtLnJvdGF0aW9uLnpcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vICAgICAgaWYgKGVudGl0eS5oYXNDb21wb25lbnQoRWxlbWVudCkgJiYgIWVudGl0eS5oYXNDb21wb25lbnQoRHJhZ2dhYmxlKSkge1xuICAgICAgLy8gICAgICAgIG9iamVjdC5tYXRlcmlhbC5jb2xvci5zZXQoMHgzMzMzMzMpO1xuICAgICAgLy8gICAgICB9XG5cbiAgICAgIGVudGl0eS5hZGRDb21wb25lbnQoT2JqZWN0M0QsIHsgdmFsdWU6IG9iamVjdCB9KTtcblxuICAgICAgLy8gQHRvZG8gUmVtb3ZlIGl0ISBoaWVyYXJjaHkgc3lzdGVtIHdpbGwgdGFrZSBjYXJlIG9mIGl0XG4gICAgICAvKlxuICAgICAgaWYgKGVudGl0eS5oYXNDb21wb25lbnQoUGFyZW50KSkge1xuICAgICAgICBlbnRpdHlcbiAgICAgICAgICAuZ2V0Q29tcG9uZW50KFBhcmVudClcbiAgICAgICAgICAudmFsdWUuZ2V0Q29tcG9uZW50KE9iamVjdDNEKVxuICAgICAgICAgIC52YWx1ZS5hZGQob2JqZWN0KTtcbiAgICAgIH1cbiAgICAgICovXG4gICAgfSk7XG4gIH1cbn1cblxuR2VvbWV0cnlTeXN0ZW0ucXVlcmllcyA9IHtcbiAgZW50aXRpZXM6IHtcbiAgICBjb21wb25lbnRzOiBbR2VvbWV0cnldLCAvLyBAdG9kbyBUcmFuc2Zvcm06IEFzIG9wdGlvbmFsLCBob3cgdG8gZGVmaW5lIGl0P1xuICAgIGxpc3Rlbjoge1xuICAgICAgYWRkZWQ6IHRydWUsXG4gICAgICByZW1vdmVkOiB0cnVlXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCJ0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgUGFyZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUGFyZW50LmpzXCI7XG5pbXBvcnQgeyBPYmplY3QzRCB9IGZyb20gXCIuLi9jb21wb25lbnRzL09iamVjdDNELmpzXCI7XG5pbXBvcnQgeyBHTFRGTW9kZWwgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9HTFRGTW9kZWwuanNcIjtcblxuLy8gQHRvZG8gVXNlIHBhcmFtZXRlciBhbmQgbG9hZGVyIG1hbmFnZXJcbnZhciBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpLnNldFBhdGgoXCIvYXNzZXRzL1wiKTtcblxuZXhwb3J0IGNsYXNzIEdMVEZMb2FkZXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKCkge1xuICAgIHZhciBlbnRpdGllcyA9IHRoaXMucXVlcmllcy5lbnRpdGllcy5hZGRlZDtcblxuICAgIC8vUXVlcmllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbnRpdHkgPSBlbnRpdGllc1tpXTtcbiAgICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEdMVEZNb2RlbCk7XG5cbiAgICAgIGxvYWRlci5sb2FkKGNvbXBvbmVudC51cmwsIGdsdGYgPT4ge1xuICAgICAgICAvKlxuICAgICAgICBnbHRmLnNjZW5lLnRyYXZlcnNlKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xuICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwuZW52TWFwID0gZW52TWFwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4qL1xuICAgICAgICAvLyBAdG9kbyBSZW1vdmUsIGhpZXJhcmNoeSB3aWxsIHRha2UgY2FyZSBvZiBpdFxuICAgICAgICBpZiAoZW50aXR5Lmhhc0NvbXBvbmVudChQYXJlbnQpKSB7XG4gICAgICAgICAgZW50aXR5LmdldENvbXBvbmVudChQYXJlbnQpLnZhbHVlLmFkZChnbHRmLnNjZW5lKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KE9iamVjdDNELCB7IHZhbHVlOiBnbHRmLnNjZW5lIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbkdMVEZMb2FkZXJTeXN0ZW0ucXVlcmllcyA9IHtcbiAgZW50aXRpZXM6IHtcbiAgICBjb21wb25lbnRzOiBbR0xURk1vZGVsXSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHsgU3lzdGVtLCBOb3QgfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgU2t5Qm94LCBPYmplY3QzRCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIFNreUJveFN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGV4ZWN1dGUoKSB7XG4gICAgbGV0IGVudGl0aWVzID0gdGhpcy5xdWVyaWVzLmVudGl0aWVzLnJlc3VsdHM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVudGl0eSA9IGVudGl0aWVzW2ldO1xuXG4gICAgICBsZXQgc2t5Ym94ID0gZW50aXR5LmdldENvbXBvbmVudChTa3lCb3gpO1xuXG4gICAgICBsZXQgZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hCdWZmZXJHZW9tZXRyeSgxMDAsIDEwMCwgMTAwKTtcbiAgICAgIGdlb21ldHJ5LnNjYWxlKDEsIDEsIC0xKTtcblxuICAgICAgaWYgKHNreWJveC50eXBlID09PSBcImN1YmVtYXAtc3RlcmVvXCIpIHtcbiAgICAgICAgbGV0IHRleHR1cmVzID0gZ2V0VGV4dHVyZXNGcm9tQXRsYXNGaWxlKHNreWJveC50ZXh0dXJlVXJsLCAxMik7XG5cbiAgICAgICAgbGV0IG1hdGVyaWFscyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNjsgaisrKSB7XG4gICAgICAgICAgbWF0ZXJpYWxzLnB1c2gobmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgbWFwOiB0ZXh0dXJlc1tqXSB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2t5Qm94ID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFscyk7XG4gICAgICAgIHNreUJveC5sYXllcnMuc2V0KDEpO1xuICAgICAgICBncm91cC5hZGQoc2t5Qm94KTtcblxuICAgICAgICBsZXQgbWF0ZXJpYWxzUiA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGogPSA2OyBqIDwgMTI7IGorKykge1xuICAgICAgICAgIG1hdGVyaWFsc1IucHVzaChuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBtYXA6IHRleHR1cmVzW2pdIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBza3lCb3hSID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsc1IpO1xuICAgICAgICBza3lCb3hSLmxheWVycy5zZXQoMik7XG4gICAgICAgIGdyb3VwLmFkZChza3lCb3hSKTtcblxuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KE9iamVjdDNELCB7IHZhbHVlOiBncm91cCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlVua25vd24gc2t5Ym94IHR5cGU6IFwiLCBza3lib3gudHlwZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFRleHR1cmVzRnJvbUF0bGFzRmlsZShhdGxhc0ltZ1VybCwgdGlsZXNOdW0pIHtcbiAgbGV0IHRleHR1cmVzID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlc051bTsgaSsrKSB7XG4gICAgdGV4dHVyZXNbaV0gPSBuZXcgVEhSRUUuVGV4dHVyZSgpO1xuICB9XG5cbiAgbGV0IGxvYWRlciA9IG5ldyBUSFJFRS5JbWFnZUxvYWRlcigpO1xuICBsb2FkZXIubG9hZChhdGxhc0ltZ1VybCwgZnVuY3Rpb24oaW1hZ2VPYmopIHtcbiAgICBsZXQgY2FudmFzLCBjb250ZXh0O1xuICAgIGxldCB0aWxlV2lkdGggPSBpbWFnZU9iai5oZWlnaHQ7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gdGlsZVdpZHRoO1xuICAgICAgY2FudmFzLndpZHRoID0gdGlsZVdpZHRoO1xuICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIGltYWdlT2JqLFxuICAgICAgICB0aWxlV2lkdGggKiBpLFxuICAgICAgICAwLFxuICAgICAgICB0aWxlV2lkdGgsXG4gICAgICAgIHRpbGVXaWR0aCxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgdGlsZVdpZHRoLFxuICAgICAgICB0aWxlV2lkdGhcbiAgICAgICk7XG4gICAgICB0ZXh0dXJlc1tpXS5pbWFnZSA9IGNhbnZhcztcbiAgICAgIHRleHR1cmVzW2ldLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0ZXh0dXJlcztcbn1cblxuU2t5Qm94U3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGVudGl0aWVzOiB7XG4gICAgY29tcG9uZW50czogW1NreUJveCwgTm90KE9iamVjdDNEKV1cbiAgfVxufTtcbiIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgeyBWaXNpYmxlLCBPYmplY3QzRCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBWaXNpYmlsaXR5U3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcbiAgcHJvY2Vzc1Zpc2liaWxpdHkoZW50aXRpZXMpIHtcbiAgICBlbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICBlbnRpdHkuZ2V0TXV0YWJsZUNvbXBvbmVudChPYmplY3QzRCkudmFsdWUudmlzaWJsZSA9IGVudGl0eS5nZXRDb21wb25lbnQoXG4gICAgICAgIFZpc2libGVcbiAgICAgICkudmFsdWU7XG4gICAgfSk7XG4gIH1cblxuICBleGVjdXRlKCkge1xuICAgIHRoaXMucHJvY2Vzc1Zpc2liaWxpdHkodGhpcy5xdWVyaWVzLmVudGl0aWVzLmFkZGVkKTtcbiAgICB0aGlzLnByb2Nlc3NWaXNpYmlsaXR5KHRoaXMucXVlcmllcy5lbnRpdGllcy5jaGFuZ2VkKTtcbiAgfVxufVxuXG5WaXNpYmlsaXR5U3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGVudGl0aWVzOiB7XG4gICAgY29tcG9uZW50czogW1Zpc2libGUsIE9iamVjdDNEXSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlLFxuICAgICAgY2hhbmdlZDogW1Zpc2libGVdXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHsgU3lzdGVtLCBOb3QgfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHtcbiAgUmVuZGVyUGFzcyxcbiAgQ2FtZXJhLFxuICBBY3RpdmUsXG4gIFdlYkdMUmVuZGVyZXIsXG4gIE9iamVjdDNEXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcbmltcG9ydCB7IFdFQlZSIH0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS92ci9XZWJWUi5qc1wiO1xuXG5leHBvcnQgY2xhc3MgV2ViR0xSZW5kZXJlckNvbnRleHQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2ViR0xSZW5kZXJlclN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGluaXQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInJlc2l6ZVwiLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnF1ZXJpZXMucmVuZGVyZXJzLnJlc3VsdHMuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgICAgIC8qXG4gICAgICAgICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5nZXRNdXRhYmxlQ29tcG9uZW50KFdlYkdMUmVuZGVyZXIpO1xuICAgICAgICAgIGNvbXBvbmVudC53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgIGNvbXBvbmVudC5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgKi9cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICB9XG5cbiAgZXhlY3V0ZSgpIHtcbiAgICBsZXQgcmVuZGVyZXJzID0gdGhpcy5xdWVyaWVzLnJlbmRlcmVycy5yZXN1bHRzO1xuICAgIHJlbmRlcmVycy5mb3JFYWNoKHJlbmRlcmVyRW50aXR5ID0+IHtcbiAgICAgIHZhciByZW5kZXJlciA9IHJlbmRlcmVyRW50aXR5LmdldENvbXBvbmVudChXZWJHTFJlbmRlcmVyQ29udGV4dCkudmFsdWU7XG4gICAgICB0aGlzLnF1ZXJpZXMucmVuZGVyUGFzc2VzLnJlc3VsdHMuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgICB2YXIgcGFzcyA9IGVudGl0eS5nZXRDb21wb25lbnQoUmVuZGVyUGFzcyk7XG4gICAgICAgIHZhciBzY2VuZSA9IHBhc3Muc2NlbmUuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcblxuICAgICAgICB0aGlzLnF1ZXJpZXMuYWN0aXZlQ2FtZXJhcy5yZXN1bHRzLmZvckVhY2goY2FtZXJhRW50aXR5ID0+IHtcbiAgICAgICAgICB2YXIgY2FtZXJhID0gY2FtZXJhRW50aXR5LmdldENvbXBvbmVudChPYmplY3QzRCkudmFsdWU7XG4gICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gVW5pbml0aWFsaXplZCByZW5kZXJlcnNcbiAgICB0aGlzLnF1ZXJpZXMudW5pbml0aWFsaXplZFJlbmRlcmVycy5yZXN1bHRzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFdlYkdMUmVuZGVyZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7XG4gICAgICAgIGFudGlhbGlhczogY29tcG9uZW50LmFudGlhbGlhc1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChjb21wb25lbnQuYW5pbWF0aW9uTG9vcCkge1xuICAgICAgICByZW5kZXJlci5zZXRBbmltYXRpb25Mb29wKGNvbXBvbmVudC5hbmltYXRpb25Mb29wKTtcbiAgICAgIH1cblxuICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICBpZiAoY29tcG9uZW50LmhhbmRsZVJlc2l6ZSkge1xuICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICByZW5kZXJlci5nYW1tYUlucHV0ID0gY29tcG9uZW50LmdhbW1hSW5wdXQ7XG4gICAgICByZW5kZXJlci5nYW1tYU91dHB1dCA9IGNvbXBvbmVudC5nYW1tYU91dHB1dDtcbiAgICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gY29tcG9uZW50LnNoYWRvd01hcDtcblxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICAgICAgaWYgKGNvbXBvbmVudC52cikge1xuICAgICAgICByZW5kZXJlci52ci5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChcbiAgICAgICAgICBXRUJWUi5jcmVhdGVCdXR0b24ocmVuZGVyZXIsIHsgcmVmZXJlbmNlU3BhY2VUeXBlOiBcImxvY2FsXCIgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgZW50aXR5LmFkZENvbXBvbmVudChXZWJHTFJlbmRlcmVyQ29udGV4dCwgeyB2YWx1ZTogcmVuZGVyZXIgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnF1ZXJpZXMucmVuZGVyZXJzLmNoYW5nZWQuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5nZXRDb21wb25lbnQoV2ViR0xSZW5kZXJlcik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFdlYkdMUmVuZGVyZXJDb250ZXh0KS52YWx1ZTtcbiAgICAgIGlmIChcbiAgICAgICAgY29tcG9uZW50LndpZHRoICE9PSByZW5kZXJlci53aWR0aCB8fFxuICAgICAgICBjb21wb25lbnQuaGVpZ2h0ICE9PSByZW5kZXJlci5oZWlnaHRcbiAgICAgICkge1xuICAgICAgICByZW5kZXJlci5zZXRTaXplKGNvbXBvbmVudC53aWR0aCwgY29tcG9uZW50LmhlaWdodCk7XG4gICAgICAgIC8vIGlubmVyV2lkdGgvaW5uZXJIZWlnaHRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5XZWJHTFJlbmRlcmVyU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIHVuaW5pdGlhbGl6ZWRSZW5kZXJlcnM6IHtcbiAgICBjb21wb25lbnRzOiBbV2ViR0xSZW5kZXJlciwgTm90KFdlYkdMUmVuZGVyZXJDb250ZXh0KV1cbiAgfSxcbiAgcmVuZGVyZXJzOiB7XG4gICAgY29tcG9uZW50czogW1dlYkdMUmVuZGVyZXJDb250ZXh0XSxcbi8vICAgIGNvbXBvbmVudHM6IFtXZWJHTFJlbmRlcmVyLCBXZWJHTFJlbmRlcmVyQ29udGV4dF0sXG4gICAgbGlzdGVuOiB7XG4gICAgICBjaGFuZ2VkOiBbV2ViR0xSZW5kZXJlcl1cbiAgICB9XG4gIH0sXG4gIHJlbmRlclBhc3Nlczoge1xuICAgIGNvbXBvbmVudHM6IFtSZW5kZXJQYXNzXVxuICB9LFxuICBhY3RpdmVDYW1lcmFzOiB7XG4gICAgY29tcG9uZW50czogW0NhbWVyYSwgQWN0aXZlXSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlXG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IFBhcmVudCwgT2JqZWN0M0QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcbiAgZXhlY3V0ZSgpIHtcbiAgICAvLyBIaWVyYXJjaHlcbiAgICBsZXQgYWRkZWQgPSB0aGlzLnF1ZXJpZXMucGFyZW50LmFkZGVkO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRkZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbnRpdHkgPSBhZGRlZFtpXTtcbiAgICAgIHZhciBwYXJlbnRFbnRpdHkgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFBhcmVudCkudmFsdWU7XG4gICAgICB2YXIgcGFyZW50T2JqZWN0M0QgPSBwYXJlbnRFbnRpdHkuZ2V0Q29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcbiAgICAgIHZhciBjaGlsZE9iamVjdDNEID0gZW50aXR5LmdldENvbXBvbmVudChPYmplY3QzRCkudmFsdWU7XG4gICAgICBwYXJlbnRPYmplY3QzRC5hZGQoY2hpbGRPYmplY3QzRCk7XG4gICAgfVxuICB9XG59XG5cblRyYW5zZm9ybVN5c3RlbS5xdWVyaWVzID0ge1xuICBwYXJlbnQ6IHtcbiAgICBjb21wb25lbnRzOiBbUGFyZW50LCBPYmplY3QzRF0sXG4gICAgbGlzdGVuOiB7XG4gICAgICBhZGRlZDogdHJ1ZVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCB7IFN5c3RlbSwgTm90IH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IENhbWVyYSwgT2JqZWN0M0QgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSBcInRocmVlXCI7XG5cbmV4cG9ydCBjbGFzcyBDYW1lcmFTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBpbml0KCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJyZXNpemVcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5xdWVyaWVzLmNhbWVyYXMucmVzdWx0cy5mb3JFYWNoKGNhbWVyYSA9PiB7XG4gICAgICAgICAgbGV0IGNvbXBvbmVudCA9IGNhbWVyYS5nZXRDb21wb25lbnQoQ2FtZXJhKTtcbiAgICAgICAgICBpZiAoY29tcG9uZW50LmhhbmRsZVJlc2l6ZSkge1xuICAgICAgICAgICAgY2FtZXJhLmdldE11dGFibGVDb21wb25lbnQoQ2FtZXJhKS5hc3BlY3QgPVxuICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXNwZWN0IHVwZGF0ZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICBleGVjdXRlKCkge1xuICAgIGxldCBjaGFuZ2VkID0gdGhpcy5xdWVyaWVzLmNhbWVyYXMuY2hhbmdlZDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5nZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSBjaGFuZ2VkW2ldO1xuXG4gICAgICBsZXQgY29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChDYW1lcmEpO1xuICAgICAgbGV0IGNhbWVyYTNkID0gZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoT2JqZWN0M0QpLnZhbHVlO1xuXG4gICAgICBpZiAoY2FtZXJhM2QuYXNwZWN0ICE9PSBjb21wb25lbnQuYXNwZWN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FtZXJhIFVwZGF0ZWRcIik7XG5cbiAgICAgICAgY2FtZXJhM2QuYXNwZWN0ID0gY29tcG9uZW50LmFzcGVjdDtcbiAgICAgICAgY2FtZXJhM2QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgfVxuICAgICAgLy8gQHRvZG8gRG8gaXQgZm9yIHRoZSByZXN0IG9mIHRoZSB2YWx1ZXNcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXJpZXMuY2FtZXJhc1VuaW5pdGlhbGl6ZWQucmVzdWx0cy5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlbnRpdHkpO1xuXG4gICAgICBsZXQgY29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChDYW1lcmEpO1xuXG4gICAgICBsZXQgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKFxuICAgICAgICBjb21wb25lbnQuZm92LFxuICAgICAgICBjb21wb25lbnQuYXNwZWN0LFxuICAgICAgICBjb21wb25lbnQubmVhcixcbiAgICAgICAgY29tcG9uZW50LmZhclxuICAgICAgKTtcblxuICAgICAgY2FtZXJhLmxheWVycy5lbmFibGUoY29tcG9uZW50LmxheWVycyk7XG5cbiAgICAgIGVudGl0eS5hZGRDb21wb25lbnQoT2JqZWN0M0QsIHsgdmFsdWU6IGNhbWVyYSB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5DYW1lcmFTeXN0ZW0ucXVlcmllcyA9IHtcbiAgY2FtZXJhc1VuaW5pdGlhbGl6ZWQ6IHtcbiAgICBjb21wb25lbnRzOiBbQ2FtZXJhLCBOb3QoT2JqZWN0M0QpXVxuICB9LFxuICBjYW1lcmFzOiB7XG4gICAgY29tcG9uZW50czogW0NhbWVyYSwgT2JqZWN0M0RdLFxuICAgIGxpc3Rlbjoge1xuICAgICAgY2hhbmdlZDogW0NhbWVyYV1cbiAgICB9XG4gIH1cbn07XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcbmltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgeyBUZXh0R2VvbWV0cnksIE9iamVjdDNEIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXh0R2VvbWV0cnlTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBpbml0KCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZvbnRMb2FkZXIoKTtcbiAgICB0aGlzLmZvbnQgPSBudWxsO1xuICAgIGxvYWRlci5sb2FkKFwiL2Fzc2V0cy9mb250cy9oZWx2ZXRpa2VyX3JlZ3VsYXIudHlwZWZhY2UuanNvblwiLCBmb250ID0+IHtcbiAgICAgIHRoaXMuZm9udCA9IGZvbnQ7XG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4ZWN1dGUoKSB7XG4gICAgaWYgKCF0aGlzLmZvbnQpIHJldHVybjtcblxuICAgIHZhciBjaGFuZ2VkID0gdGhpcy5xdWVyaWVzLmVudGl0aWVzLmNoYW5nZWQ7XG4gICAgY2hhbmdlZC5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICB2YXIgdGV4dENvbXBvbmVudCA9IGVudGl0eS5nZXRDb21wb25lbnQoVGV4dEdlb21ldHJ5KTtcbiAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5UZXh0R2VvbWV0cnkodGV4dENvbXBvbmVudC50ZXh0LCB7XG4gICAgICAgIGZvbnQ6IHRoaXMuZm9udCxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgaGVpZ2h0OiAwLjEsXG4gICAgICAgIGN1cnZlU2VnbWVudHM6IDMsXG4gICAgICAgIGJldmVsRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYmV2ZWxUaGlja25lc3M6IDAuMDMsXG4gICAgICAgIGJldmVsU2l6ZTogMC4wMyxcbiAgICAgICAgYmV2ZWxPZmZzZXQ6IDAsXG4gICAgICAgIGJldmVsU2VnbWVudHM6IDNcbiAgICAgIH0pO1xuICAgICAgdmFyIG9iamVjdCA9IGVudGl0eS5nZXRNdXRhYmxlQ29tcG9uZW50KE9iamVjdDNEKS52YWx1ZTtcbiAgICAgIG9iamVjdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIH0pO1xuXG4gICAgdmFyIGFkZGVkID0gdGhpcy5xdWVyaWVzLmVudGl0aWVzLmFkZGVkO1xuICAgIGFkZGVkLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgIHZhciB0ZXh0Q29tcG9uZW50ID0gZW50aXR5LmdldENvbXBvbmVudChUZXh0R2VvbWV0cnkpO1xuICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlRleHRHZW9tZXRyeSh0ZXh0Q29tcG9uZW50LnRleHQsIHtcbiAgICAgICAgZm9udDogdGhpcy5mb250LFxuICAgICAgICBzaXplOiAxLFxuICAgICAgICBoZWlnaHQ6IDAuMSxcbiAgICAgICAgY3VydmVTZWdtZW50czogMyxcbiAgICAgICAgYmV2ZWxFbmFibGVkOiB0cnVlLFxuICAgICAgICBiZXZlbFRoaWNrbmVzczogMC4wMyxcbiAgICAgICAgYmV2ZWxTaXplOiAwLjAzLFxuICAgICAgICBiZXZlbE9mZnNldDogMCxcbiAgICAgICAgYmV2ZWxTZWdtZW50czogM1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjb2xvciA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZjtcbiAgICAgIGNvbG9yID0gMHhmZmZmZmY7XG4gICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgIHJvdWdobmVzczogMC43LFxuICAgICAgICBtZXRhbG5lc3M6IDAuMFxuICAgICAgfSk7XG5cbiAgICAgIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcblxuICAgICAgZW50aXR5LmFkZENvbXBvbmVudChPYmplY3QzRCwgeyB2YWx1ZTogbWVzaCB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5UZXh0R2VvbWV0cnlTeXN0ZW0ucXVlcmllcyA9IHtcbiAgZW50aXRpZXM6IHtcbiAgICBjb21wb25lbnRzOiBbVGV4dEdlb21ldHJ5XSxcbiAgICBsaXN0ZW46IHtcbiAgICAgIGFkZGVkOiB0cnVlLFxuICAgICAgY2hhbmdlZDogdHJ1ZVxuICAgIH1cbiAgfVxufTtcbiIsImltcG9ydCAqIGFzIEVDU1kgZnJvbSBcImVjc3lcIjtcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiO1xuXG4vLyBjb21wb25lbnRzXG5leHBvcnQge1xuICBBY3RpdmUsXG4gIENhbWVyYSxcbiAgQ2FtZXJhUmlnLFxuICBEcmFnZ2FibGUsXG4gIERyYWdnaW5nLFxuICBHZW9tZXRyeSxcbiAgR0xURk1vZGVsLFxuICBNYXRlcmlhbCxcbiAgT2JqZWN0M0QsXG4gIFBhcmVudCxcbiAgUG9zaXRpb24sXG4gIFJvdGF0aW9uLFxuICBSZW5kZXJQYXNzLFxuICBTY2VuZSxcbiAgU2t5LFxuICBTa3lCb3gsXG4gIFRleHRHZW9tZXRyeSxcbiAgVHJhbnNmb3JtLFxuICBWaXNpYmxlLFxuICBWUkNvbnRyb2xsZXJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG4vLyBzeXN0ZW1zXG5leHBvcnQgeyBHZW9tZXRyeVN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvR2VvbWV0cnlTeXN0ZW0uanNcIjtcbmV4cG9ydCB7IEdMVEZMb2FkZXJTeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL0dMVEZMb2FkZXJTeXN0ZW0uanNcIjtcbmV4cG9ydCB7IFNreUJveFN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvU2t5Qm94U3lzdGVtLmpzXCI7XG5leHBvcnQgeyBWaXNpYmlsaXR5U3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9WaXNpYmlsaXR5U3lzdGVtLmpzXCI7XG5leHBvcnQge1xuICBXZWJHTFJlbmRlcmVyU3lzdGVtLFxuICBXZWJHTFJlbmRlcmVyQ29udGV4dFxufSBmcm9tIFwiLi9zeXN0ZW1zL1dlYkdMUmVuZGVyZXJTeXN0ZW0uanNcIjtcbmV4cG9ydCB7IFRyYW5zZm9ybVN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvVHJhbnNmb3JtU3lzdGVtLmpzXCI7XG5leHBvcnQgeyBDYW1lcmFTeXN0ZW0gfSBmcm9tIFwiLi9zeXN0ZW1zL0NhbWVyYVN5c3RlbS5qc1wiO1xuZXhwb3J0IHsgVGV4dEdlb21ldHJ5U3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9UZXh0R2VvbWV0cnlTeXN0ZW0uanNcIjtcblxuaW1wb3J0IHsgVHJhbnNmb3JtU3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9UcmFuc2Zvcm1TeXN0ZW0uanNcIjtcbmltcG9ydCB7IENhbWVyYVN5c3RlbSB9IGZyb20gXCIuL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBXZWJHTFJlbmRlcmVyU3lzdGVtIH0gZnJvbSBcIi4vc3lzdGVtcy9XZWJHTFJlbmRlcmVyU3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBPYmplY3QzRCB9IGZyb20gXCIuL2NvbXBvbmVudHMvT2JqZWN0M0QuanNcIjtcbmltcG9ydCB7IENhbWVyYVJpZyB9IGZyb20gXCIuL2NvbXBvbmVudHMvQ2FtZXJhUmlnLmpzXCI7XG5pbXBvcnQgeyBQYXJlbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL1BhcmVudC5qc1wiO1xuaW1wb3J0IHtcbiAgV2ViR0xSZW5kZXJlcixcbiAgU2NlbmUsXG4gIFJlbmRlclBhc3MsXG4gIENhbWVyYVxufSBmcm9tIFwiLi9jb21wb25lbnRzL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KHdvcmxkKSB7XG4gIHdvcmxkXG4gICAgLnJlZ2lzdGVyU3lzdGVtKFRyYW5zZm9ybVN5c3RlbSlcbiAgICAucmVnaXN0ZXJTeXN0ZW0oQ2FtZXJhU3lzdGVtKVxuICAgIC5yZWdpc3RlclN5c3RlbShXZWJHTFJlbmRlcmVyU3lzdGVtLCB7IHByaW9yaXR5OiAxIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURlZmF1bHQod29ybGQgPSBuZXcgRUNTWS5Xb3JsZCgpLCBvcHRpb25zKSB7XG4gIGNvbnN0IGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7XG5cbiAgaW5pdCh3b3JsZCk7XG5cbiAgbGV0IHNjZW5lID0gd29ybGRcbiAgICAuY3JlYXRlRW50aXR5KClcbiAgICAuYWRkQ29tcG9uZW50KFNjZW5lKVxuICAgIC5hZGRDb21wb25lbnQoT2JqZWN0M0QsIHsgdmFsdWU6IG5ldyBUSFJFRS5TY2VuZSgpIH0pO1xuXG4gIGxldCByZW5kZXJlciA9IHdvcmxkLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChXZWJHTFJlbmRlcmVyLCB7XG4gICAgLyphbmltYXRpb25Mb29wOiAoKSA9PiB7XG4gICAgICB3b3JsZC5leGVjdXRlKGNsb2NrLmdldERlbHRhKCksIGNsb2NrLmVsYXBzZWRUaW1lKTtcbiAgICB9Ki9cbiAgfSk7XG5cbiAgLy8gY2FtZXJhIHJpZyAmIGNvbnRyb2xsZXJzXG4gIHZhciBjYW1lcmEgPSBudWxsLFxuICAgIGNhbWVyYVJpZyA9IG51bGw7XG5cbiAgaWYgKG9wdGlvbnMudnIpIHtcbiAgICBjYW1lcmFSaWcgPSB3b3JsZFxuICAgICAgLmNyZWF0ZUVudGl0eSgpXG4gICAgICAuYWRkQ29tcG9uZW50KENhbWVyYVJpZylcbiAgICAgIC5hZGRDb21wb25lbnQoUGFyZW50LCB7IHZhbHVlOiBzY2VuZSB9KTtcbiAgfSBlbHNlIHtcbiAgICBjYW1lcmEgPSB3b3JsZC5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoQ2FtZXJhLCB7XG4gICAgICBmb3Y6IDkwLFxuICAgICAgYXNwZWN0OiB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIG5lYXI6IDEsXG4gICAgICBmYXI6IDEwMDAsXG4gICAgICBsYXllcnM6IDEsXG4gICAgICBoYW5kbGVSZXNpemU6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGxldCByZW5kZXJQYXNzID0gd29ybGQuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KFJlbmRlclBhc3MsIHtcbiAgICBzY2VuZTogc2NlbmUsXG4gICAgY2FtZXJhOiBjYW1lcmFcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB3b3JsZCxcbiAgICBlbnRpdGllczoge1xuICAgICAgc2NlbmUsXG4gICAgICBjYW1lcmEsXG4gICAgICBjYW1lcmFSaWcsXG4gICAgICByZW5kZXJlcixcbiAgICAgIHJlbmRlclBhc3NcbiAgICB9XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgRHJhZ2dhYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy52YWx1ZSA9IGZhbHNlO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbG9yID0gMHhmZjAwMDA7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJ0aHJlZVwiO1xuXG5leHBvcnQgY2xhc3MgUG9zaXRpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwidGhyZWVcIjtcblxuZXhwb3J0IGNsYXNzIFJvdGF0aW9uIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yb3RhdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnJvdGF0aW9uLnNldCgwLCAwLCAwKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNreSB7XG4gIGNvbnN0cnVjdG9yKCkge31cbiAgcmVzZXQoKSB7fVxufVxuIiwiZXhwb3J0IGNsYXNzIFZSQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaWQgPSAwO1xuICAgIHRoaXMuY29udHJvbGxlciA9IG51bGw7XG4gIH1cbiAgcmVzZXQoKSB7fVxufVxuIl0sIm5hbWVzIjpbIkFjdGl2ZSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJyZXNldCIsInZhbHVlIiwiQ2FtZXJhUmlnIiwibGVmdEhhbmQiLCJyaWdodEhhbmQiLCJjYW1lcmEiLCJEcmFnZ2luZyIsIlRhZ0NvbXBvbmVudCIsIkdlb21ldHJ5IiwicHJpbWl0aXZlIiwiR0xURk1vZGVsIiwiT2JqZWN0M0QiLCJQYXJlbnQiLCJSZW5kZXJQYXNzIiwic2NlbmUiLCJTY2VuZSIsIlNreUJveCIsInRleHR1cmUiLCJ0eXBlIiwiVGV4dEdlb21ldHJ5IiwiVHJhbnNmb3JtIiwicG9zaXRpb24iLCJUSFJFRS5WZWN0b3IzIiwicm90YXRpb24iLCJzcmMiLCJjb3B5Iiwic2V0IiwiVmlzaWJsZSIsIkNhbWVyYSIsImZvdiIsImFzcGVjdCIsIm5lYXIiLCJmYXIiLCJsYXllcnMiLCJoYW5kbGVSZXNpemUiLCJXZWJHTFJlbmRlcmVyIiwidnIiLCJhbnRpYWxpYXMiLCJnYW1tYUlucHV0IiwiZ2FtbWFPdXRwdXQiLCJzaGFkb3dNYXAiLCJHZW9tZXRyeVN5c3RlbSIsIlN5c3RlbSIsInF1ZXJpZXMiLCJlbnRpdGllcyIsInJlbW92ZWQiLCJmb3JFYWNoIiwiYWRkZWQiLCJlbnRpdHkiLCJnZW9tZXRyeSIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsIlRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnkiLCJyYWRpdXMiLCJ0dWJlIiwicmFkaWFsU2VnbWVudHMiLCJ0dWJ1bGFyU2VnbWVudHMiLCJUSFJFRS5JY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5IiwiVEhSRUUuQm94QnVmZmVyR2VvbWV0cnkiLCJ3aWR0aCIsImhlaWdodCIsImRlcHRoIiwiY29sb3IiLCJNYXRoIiwicmFuZG9tIiwibWF0ZXJpYWwiLCJUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsIiwiZmxhdFNoYWRpbmciLCJvYmplY3QiLCJUSFJFRS5NZXNoIiwiY2FzdFNoYWRvdyIsInJlY2VpdmVTaGFkb3ciLCJoYXNDb21wb25lbnQiLCJ0cmFuc2Zvcm0iLCJ4IiwieSIsInoiLCJhZGRDb21wb25lbnQiLCJjb21wb25lbnRzIiwibGlzdGVuIiwibG9hZGVyIiwiR0xURkxvYWRlciIsInNldFBhdGgiLCJHTFRGTG9hZGVyU3lzdGVtIiwiaSIsImxlbmd0aCIsImxvYWQiLCJ1cmwiLCJnbHRmIiwiYWRkIiwiU2t5Qm94U3lzdGVtIiwicmVzdWx0cyIsInNreWJveCIsImdyb3VwIiwiVEhSRUUuR3JvdXAiLCJzY2FsZSIsInRleHR1cmVzIiwiZ2V0VGV4dHVyZXNGcm9tQXRsYXNGaWxlIiwidGV4dHVyZVVybCIsIm1hdGVyaWFscyIsImoiLCJwdXNoIiwiVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwiLCJtYXAiLCJza3lCb3giLCJtYXRlcmlhbHNSIiwic2t5Qm94UiIsImNvbnNvbGUiLCJ3YXJuIiwiYXRsYXNJbWdVcmwiLCJ0aWxlc051bSIsIlRIUkVFLlRleHR1cmUiLCJUSFJFRS5JbWFnZUxvYWRlciIsImltYWdlT2JqIiwiY2FudmFzIiwiY29udGV4dCIsInRpbGVXaWR0aCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIm5lZWRzVXBkYXRlIiwiTm90IiwiVmlzaWJpbGl0eVN5c3RlbSIsImdldE11dGFibGVDb21wb25lbnQiLCJ2aXNpYmxlIiwicHJvY2Vzc1Zpc2liaWxpdHkiLCJjaGFuZ2VkIiwiV2ViR0xSZW5kZXJlckNvbnRleHQiLCJXZWJHTFJlbmRlcmVyU3lzdGVtIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbmRlcmVycyIsInJlbmRlcmVyRW50aXR5IiwicmVuZGVyZXIiLCJyZW5kZXJQYXNzZXMiLCJhY3RpdmVDYW1lcmFzIiwiY2FtZXJhRW50aXR5IiwicmVuZGVyIiwidW5pbml0aWFsaXplZFJlbmRlcmVycyIsIlRIUkVFLldlYkdMUmVuZGVyZXIiLCJhbmltYXRpb25Mb29wIiwic2V0QW5pbWF0aW9uTG9vcCIsInNldFBpeGVsUmF0aW8iLCJkZXZpY2VQaXhlbFJhdGlvIiwic2V0U2l6ZSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImVuYWJsZWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiV0VCVlIiLCJjcmVhdGVCdXR0b24iLCJyZWZlcmVuY2VTcGFjZVR5cGUiLCJUcmFuc2Zvcm1TeXN0ZW0iLCJwYXJlbnQiLCJwYXJlbnRPYmplY3QzRCIsImNoaWxkT2JqZWN0M0QiLCJDYW1lcmFTeXN0ZW0iLCJjYW1lcmFzIiwibG9nIiwiY2FtZXJhM2QiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4IiwiY2FtZXJhc1VuaW5pdGlhbGl6ZWQiLCJUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSIsImVuYWJsZSIsIlRleHRHZW9tZXRyeVN5c3RlbSIsImluaXRpYWxpemVkIiwiVEhSRUUuRm9udExvYWRlciIsImZvbnQiLCJ0ZXh0Q29tcG9uZW50IiwiVEhSRUUuVGV4dEdlb21ldHJ5IiwidGV4dCIsInNpemUiLCJjdXJ2ZVNlZ21lbnRzIiwiYmV2ZWxFbmFibGVkIiwiYmV2ZWxUaGlja25lc3MiLCJiZXZlbFNpemUiLCJiZXZlbE9mZnNldCIsImJldmVsU2VnbWVudHMiLCJUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsIm1lc2giLCJpbml0Iiwid29ybGQiLCJyZWdpc3RlclN5c3RlbSIsInByaW9yaXR5IiwiaWQiLCJjb250cm9sbGVyIiwiRUNTWS5Xb3JsZCIsIm9wdGlvbnMiLCJUSFJFRS5DbG9jayIsImNyZWF0ZUVudGl0eSIsIlRIUkVFLlNjZW5lIiwiY2FtZXJhUmlnIiwicmVuZGVyUGFzcyJdLCJtYXBwaW5ncyI6InlpQkFBTyxNQUFNQSxFQUNYQyxjQUNFQyxLQUFLQyxRQUdQRixRQUNFQyxLQUFLRSxPQUFRLEdDTlYsTUFBTUMsRUFDWEosY0FDRUMsS0FBS0MsUUFHUEYsUUFDRUMsS0FBS0ksU0FBVyxLQUNoQkosS0FBS0ssVUFBWSxLQUNqQkwsS0FBS00sT0FBUyxNQ1BYLE1BQU1DLFVBQWlCQyxnQkNEdkIsTUFBTUMsRUFDWFYsY0FDRUMsS0FBS1UsVUFBWSxNQUduQlgsUUFDRUMsS0FBS1UsVUFBWSxPQ05kLE1BQU1DLEdDQU4sTUFBTUMsRUFDWGIsY0FDRUMsS0FBS0UsTUFBUSxLQUdmSCxRQUNFQyxLQUFLRSxNQUFRLE1DTlYsTUFBTVcsRUFDWGQsY0FDRUMsS0FBS0UsTUFBUSxLQUdmSCxRQUNFQyxLQUFLRSxNQUFRLE1DTlYsTUFBTVksRUFDWGYsY0FDRUMsS0FBS2UsTUFBUSxLQUNiZixLQUFLTSxPQUFTLEtBR2hCUCxRQUNFQyxLQUFLZSxNQUFRLEtBQ2JmLEtBQUtNLE9BQVMsTUNSWCxNQUFNVSxFQUNYakIsY0FDRUMsS0FBS2UsTUFBUSxLQUdmaEIsUUFDRUMsS0FBS2Us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
